---
title: ğŸ¦Š ê°ì‹œ
author: gengminy
date: 2023-10-22 20:00:00 +09:00
categories: [ì•Œê³ ë¦¬ì¦˜, ê°ì‹œ]
tags: [ì•Œê³ ë¦¬ì¦˜, ë°±ì¤€, ê³¨ë“œ4, ë°±íŠ¸ë˜í‚¹, 4ì£¼ì°¨, ë…¸ê²½ë¯¼]
render_with_liquid: false
---

## 1. ë¬¸ì œ ë§í¬

[15683ë²ˆ: ê°ì‹œ](https://www.acmicpc.net/problem/15683)

<br>

## 2. ì½”ë“œ

`Python3` `31708KB` `2852ms`

```python
stack = []
MAP = []
    
MIN = 10000
blocked = 0
def backtracking(depth):
    global MAP
    global MIN
    global N, M, D
    global stack
    global camera
    global blocked
    if depth == D:
        MIN = min(MIN, N * M - blocked - len(stack))
        return
        
    x, y = camera[depth]
    delta = [[0, 1], [1, 0], [0, -1], [-1, 0], ] #ìƒìš°í•˜ì¢Œ
    if MAP[y][x] == 1:
        for dx, dy in delta:
            count = doWatch(x, y, [dx, dy])
            # í•œìª½ì„ íˆ¬ì˜í–ˆìœ¼ë‹ˆ ë‹¤ìŒ ë°±íŠ¸ë˜í‚¹
            backtracking(depth + 1)
            # ì›ìƒ ë³µêµ¬
            for _ in range(count):
                stack.pop()
    elif MAP[y][x] == 2:
        for i in range(2):
            dx, dy = delta[i]
            count = doWatch(x, y, [dx, dy])
            dx, dy = delta[i + 2]
            count += doWatch(x, y, [dx, dy])
            # í•œìª½ì„ íˆ¬ì˜í–ˆìœ¼ë‹ˆ ë‹¤ìŒ ë°±íŠ¸ë˜í‚¹
            backtracking(depth + 1)
            # ì›ìƒ ë³µêµ¬
            for _ in range(count):
                stack.pop()
    elif MAP[y][x] == 3:
        for i in range(4):
            dx, dy = delta[i]
            count = doWatch(x, y, [dx, dy])
            dx, dy = delta[(i + 1) % 4]
            count += doWatch(x, y, [dx, dy])
            # í•œìª½ì„ íˆ¬ì˜í–ˆìœ¼ë‹ˆ ë‹¤ìŒ ë°±íŠ¸ë˜í‚¹
            backtracking(depth + 1)
            # ì›ìƒ ë³µêµ¬
            for _ in range(count):
                stack.pop()
    elif MAP[y][x] == 4:
        for i in range(4):
            dx, dy = delta[i]
            count = doWatch(x, y, [dx, dy])
            dx, dy = delta[(i + 1) % 4]
            count += doWatch(x, y, [dx, dy])
            dx, dy = delta[(i + 2) % 4]
            count += doWatch(x, y, [dx, dy])
            # í•œìª½ì„ íˆ¬ì˜í–ˆìœ¼ë‹ˆ ë‹¤ìŒ ë°±íŠ¸ë˜í‚¹
            backtracking(depth + 1)
            # ì›ìƒ ë³µêµ¬
            for _ in range(count):
                stack.pop()
    elif MAP[y][x] == 5:
        dx, dy = delta[0]
        count = doWatch(x, y, [dx, dy])
        dx, dy = delta[1]
        count += doWatch(x, y, [dx, dy])
        dx, dy = delta[2]
        count += doWatch(x, y, [dx, dy])
        dx, dy = delta[3]
        count += doWatch(x, y, [dx, dy])
        # í•œìª½ì„ íˆ¬ì˜í–ˆìœ¼ë‹ˆ ë‹¤ìŒ ë°±íŠ¸ë˜í‚¹
        backtracking(depth + 1)
        # ì›ìƒ ë³µêµ¬
        for _ in range(count):
            stack.pop()

def doWatch(x, y, delta):
    global MAP
    global stack
    global N, M
    global camera
    dx, dy = delta
    nx = x
    ny = y
    count = 0
    while True:
        nx = nx + dx
        ny = ny + dy
        if 0 <= nx < M and 0 <= ny < N:
            # ë²½ì„ ë§ˆì£¼í•¨
            if MAP[ny][nx] == 6:
                break
            # ì´ë¯¸ ê²€ì‚¬í•œ ê³³ í†µê³¼
            if [nx, ny] in stack or [nx, ny] in camera:
                continue
            # ê²€ì‚¬í•œ ê³³ ì €ì¥
            stack.append([nx, ny])
            count += 1
        else:
            break
    return count
            
camera = []
N, M = map(int, input().split())
for i in range(N):
    MAP.append(list(map(int, input().split())))
    for j in range(M):
        if 1 <= MAP[i][j] <= 5:
            camera.append([j, i])
            blocked += 1
        if MAP[i][j] == 6:
            blocked += 1
D = len(camera)

backtracking(0)
print(MIN)
```

<br>

## 3. í•´ì„¤

`python3` `31120kb` `520ms`

ì•½ê°„ì˜ ë…¸ê°€ë‹¤ì„± ë°±íŠ¸ë˜í‚¹ ë¬¸ì œ

1ë²ˆë¶€í„° 5ë²ˆ ìœ í˜•ì˜ ì¹´ë©”ë¼ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê³  while ë¬¸ì„ ëŒë ¤ì„œ ë²½ì— ë‹¿ì„ë•Œ ê¹Œì§€ ìŠ¤íƒì— ê°ì‹œí•  ìœ„ì¹˜ë¥¼ ì €ì¥

ì´ë•Œ ì¹´ë©”ë¼ì™€ ì´ë¯¸ ê²€ì‚¬í•œ ì§€ì ì€ ë°©ë¬¸ ì²´í¬ (stack) ë¥¼ í†µí•´ ê¸°ì–µí•˜ê³  ì €ì¥í•˜ì§€ ì•ŠìŒ

ì¹´ë©”ë¼ì˜ ê°œìˆ˜ì™€ depth ê°€ ì¼ì¹˜í•˜ë©´ ë°±íŠ¸ë˜í‚¹ ì¢…ë£Œ

ì´í›„ ì¬ê·€ë¥¼ ë¹ ì ¸ë‚˜ì˜¬ ë•Œ ê°ì‹œ ì‹œì‘í•œ ì§€ì ì˜ ê°œìˆ˜ ë§Œí¼ stack ì—ì„œ pop í•´ì£¼ì–´ ì›ë³µ ì‹œí‚´