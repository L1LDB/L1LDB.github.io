---
title: ğŸ¦Š ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•!
author: gengminy
date: 2023-10-01 20:00:00 +09:00
categories: [ì•Œê³ ë¦¬ì¦˜, ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•!]
tags: [ì•Œê³ ë¦¬ì¦˜, ë°±ì¤€, ê³¨ë“œ4, êµ¬í˜„, 2ì£¼ì°¨, ë…¸ê²½ë¯¼]
render_with_liquid: false
---

## 1. ë¬¸ì œ ë§í¬

[17144ë²ˆ: ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•!](https://www.acmicpc.net/problem/17144)

<br>
<br>

## 2. ì½”ë“œ

`pypy3` `146128kb` `588ms`

```python
import sys

R, C, T = map(int, input().split())
CLEANER = [] #ê³µê¸°ì²­ì •ê¸° ìœ„ì¹˜
MAP = []
for i in range(R):
    MAP.append(list(map(int, sys.stdin.readline().split())))
    for j in range(C):
        # ê³µê¸° ì²­ì •ê¸° ì¢Œí‘œ ì €ì¥
        if MAP[i][j] == -1:
            CLEANER.append([j, i])

# Tì´ˆ ë™ì•ˆ ë°˜ë³µ
for _ in range(T):
    # ë¨¼ì§€ ìœ„ì¹˜ ì €ì¥ (x, y, dust)
    DUST = []
    for i in range(R):
        for j in range(C):
            if MAP[i][j] > 0:
                DUST.append([j, i, MAP[i][j]])
    
    # ë¨¼ì§€ í™•ì‚°
    delta = [[1, 0], [0, -1], [-1, 0], [0, 1]]
    for x, y, dust in DUST:
        for dx, dy in delta:
            count = 0
            nx = x + dx
            ny = y + dy
            if 0 <= nx < C and 0 <= ny < R and MAP[ny][nx] != -1:
                MAP[y][x] -= dust // 5
                MAP[ny][nx] += dust // 5

    # ìƒë‹¨ ê³µê¸° ì²­ì •ê¸° ê°€ë™
    next_clean = []
    top = 1    
    for x, y in CLEANER:
        # ìƒë‹¨ ì—¬ë¶€
        direction = 0 # 0 ~ 3ê¹Œì§€
        cur_x = x
        cur_y = y
        
        while True:
            dx, dy = delta[direction]
            nx = cur_x + dx
            ny = cur_y + dy

            # ë‹¤ìŒì¹¸ì„ í˜„ì¬ì¹¸ì˜ ë¨¼ì§€ë¡œ ëŒ€ì²´í•œ ê²ƒì„ ì €ì¥
            if 0 <= nx < C and 0 <= ny < R:
                # ì²˜ìŒìœ„ì¹˜ë¡œ ì˜¤ë©´ break
                if MAP[ny][nx] == -1:
                    top = -1
                    break
            
                next_clean.append([nx, ny, max(0, MAP[cur_y][cur_x])])
                cur_x = nx
                cur_y = ny
            # ë²½ì— ë¶€ë”ªíˆë©´ ë°©í–¥ì„ ë°”ê¿ˆ
            else:
                direction += top

    # ì‹¤ì œ ë°˜ì˜
    for x, y, dust in next_clean:
        MAP[y][x] = dust

result = 0
for i in range(R):
    for j in range(C):
        if MAP[i][j] > 0:
            result += MAP[i][j]
print(result)
```


- í•´ì„¤
    
    ë¬¸ì œì—ì„œ ì œì‹œí•œ ì¡°ê±´ì— ë§ê²Œ DFS ë¡œ êµ¬í˜„
