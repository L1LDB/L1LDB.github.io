---
title: "ğŸ¢ chap8. ìƒì†ê³¼ ë‹¤í˜•ì„±"
author: gani0325
date: 2023-12-03 20:00:00 +09:00
categories: [ì „ë¬¸ê°€ë¥¼ ìœ„í•œ C, "chap8. ìƒì†ê³¼ ë‹¤í˜•ì„±"]
tags: [ì „ë¬¸ê°€ë¥¼ ìœ„í•œ C, Cì–¸ì–´, 7ì£¼ì°¨, ì´ê°€ì€]
render_with_liquid: false
math: true
---

<h2> â­ 8.1 ìƒì† </h2>

ìƒì† ê´€ê³„: to-be ê´€ê³„, í™•ì¥ ê´€ê³„extention relationship

ì–´ë–¤ ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì™€ ê°™ì€ ì†ì„±ì„ ê°–ê³  ìˆëŠ”ë° ë‹¤ë¥¸ ì¶”ê°€ ì†ì„±ì„ ê°€ì§„ ê²½ìš°

ì˜ˆ) í•™ìƒì€ ì‚¬ëŒì´ë¼ëŠ” ëª¨ë“  ì†ì„±ì„ ê°–ê³  ìˆìœ¼ë‚˜ ë‹¤ë¥¸ ì¶”ê°€ ì†ì„±ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ

- ì½”ë“œ ë°•ìŠ¤ 8-1 (p.316)

Person í´ë˜ìŠ¤ì™€ Student í´ë˜ìŠ¤ ì†ì„± êµ¬ì¡°ì²´

â†’ ìƒˆë¡œìš´ ì†ì„±ìœ¼ë¡œ í™•ì¥, to be ê´€ê³„, â€˜í•™ìƒì€ ì‚¬ëŒì´ë‹¤â€™

person_t: ìŠˆí¼íƒ€ì…supertype, ë² ì´ìŠ¤íƒ€ì…base type, ë¶€ëª¨ íƒ€ì…parent type

student_t: ìì‹ íƒ€ì…child type, ìƒì†ë°›ì€ ì„œë¸Œíƒ€ì…inherited subtype

â˜‘ï¸ **ìƒì†ì˜ ë³¸ì§ˆ**

ìƒì† ê´€ê³„: ì¼ëŒ€ì¼ í•©ì„± ê´€ê³„

Student í´ë˜ìŠ¤ì˜ ì†ì„± êµ¬ì¡°ì²´ ë‚´ë¶€ì— ë¹„ê³µê°œ person ê°ì²´ê°€ ì¡´ì¬

â†’í•™ìƒ ë‚´ë¶€ì— ì¸ê°„ì˜ ì†ì„±ì„ ê°€ì§

- ì½”ë“œ ë°•ìŠ¤ 8-2 (p.317)

Person í´ë˜ìŠ¤ì™€ Student í´ë˜ìŠ¤ ì†ì„± êµ¬ì¡°ì²´(ì¤‘ì²©ë¨)

â†’ í¬ì¸í„°ê°€ ì•„ë‹Œ êµ¬ì¡°ì²´ ë³€ìˆ˜ ì‚¬ìš©, ì´ì „ êµ¬ì¡°ì²´ë¥¼ ìƒì†í•œ ìƒˆ êµ¬ì¡°ì²´ ë‚´ë¶€ì— êµ¬ì¡°ì²´ ë³€ìˆ˜ë¥¼ ê°€ì§

ì—…ìºìŠ¤íŒ…: ìì‹ì˜ ì†ì„± êµ¬ì¡°ì²´ ìë£Œí˜•ì˜ í¬ì¸í„°ë¥¼ ë¶€ëª¨ ì†ì„± êµ¬ì¡°ì²´ ìë£Œí˜•ìœ¼ë¡œ ë³€í™˜

student_t í¬ì¸í„°ë¥¼ person_t í¬ì¸í„°ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŒ

- ì˜ˆì œ 8-1 (p.318)

  ```c
  #include <stdio.h>

  typedef struct {
    char first_name[32];
    char last_name[32];
    unsigned int birth_year;
  } person_t;

  typedef struct {
    person_t person;
    char student_number[16]; // ì¶”ê°€ ì†ì„±
    unsigned int passed_credits; // ì¶”ê°€ ì†ì„±
  } student_t;

  int main(int argc, char** argv) {
    student_t s;
    student_t* s_ptr = &s;
    person_t* p_ptr = (person_t*)&s;
    printf("Student pointer points to %p\n", (void*)s_ptr);
    printf("Person pointer points to %p\n", (void*)p_ptr);
    return 0;
  }
  ```

  s_ptrê³¼ p_ptr í¬ì¸í„°ëŠ” ë©”ëª¨ë¦¬ì—ì„œ ê°™ì€ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚´

  ```c
  gcc ExtremeC_examples_chapter8_1.c -o ex8_1.out
  ./ex8_1.out
  //Student pointer points to 0x7ffeb64e6500
  //Person pointer points to 0x7ffeb64e6500
  ```

  student_tí˜•ì˜ êµ¬ì¡°ì²´ ë³€ìˆ˜ê°€ person_t êµ¬ì¡°ì²´ë¥¼ ìƒì†í•œë‹¤ëŠ” ëœ»

  â†’ student ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°ë¡œ Person í´ë˜ìŠ¤ì˜ í–‰ìœ„ í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥

- ì½”ë“œ ë°•ìŠ¤ 8-3 (p.319)

ì»´íŒŒì¼ë˜ì§€ ì•ŠëŠ” ìƒì† ê´€ê³„ ë§Œë“¤ê¸°

ë¶ˆì™„ì „í•œ í˜•ì‹ ì„ ì–¸â†’ë³€ìˆ˜ ìƒì„± ë¶ˆê°€ëŠ¥, í™ ë©”ëª¨ë¦¬ í• ë‹¹ ë¶ˆê°€ëŠ¥

ì¤‘ì²©ëœ êµ¬ì¡°ì²´ ë³€ìˆ˜ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” student_t êµ¬ì¡°ì²´ê°€ ë¹„ê³µê°œì¸ person_t êµ¬ì¡°ì²´ì˜ ì‹¤ì œ ì •ì˜ë¥¼ ì•Œì•„ì•¼ í•¨

ìƒì† ê´€ê³„ êµ¬í˜„ì„ ìœ„í•œ ì ‘ê·¼ ë°©ë²•

1. ìì‹ í´ë˜ìŠ¤ê°€ ë² ì´ìŠ¤ í´ë˜ìŠ¤ì— ëŒ€í•œ ë¹„ê³µê°œ êµ¬í˜„ì— ì ‘ê·¼
2. ìì‹ í´ë˜ìŠ¤ê°€ ë² ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì ‘ê·¼

â˜‘ï¸ **Cì˜ ìƒì†ì— ê´€í•œ ì²« ë²ˆì§¸ ì ‘ê·¼ë²•**

ì²« ë²ˆì§¸ ì ‘ê·¼ë²•ì— ëŒ€í•´ ì˜ˆì œ 8-2ì—ì„œ ì„¤ëª…

Student í´ë˜ìŠ¤ëŠ” Person í´ë˜ìŠ¤ì˜ ì†ì„± êµ¬ì¡°ì²´ì— ëŒ€í•œ ì‹¤ì œ ë¹„ê³µê°œ ì •ì˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•¨

- ì˜ˆì œ 8-2

  ```c
  #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_2_PERSON_H
  #define EXTREME_C_EXAMPLES_CHAPTER_8_2_PERSON_H

  // ì „ë°© ì„ ì–¸
  struct person_t;

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  struct person_t* person_new();

  // ìƒì„±ì
  void person_ctor(struct person_t*,
                   const char*  /* first name */,
                   const char*  /* last name */,
                   unsigned int /* birth year */);

  // ì†Œë©¸ì
  void person_dtor(struct person_t*);

  // í–‰ìœ„ í•¨ìˆ˜
  void person_get_first_name(struct person_t*, char*);
  void person_get_last_name(struct person_t*, char*);
  unsigned int person_get_birth_year(struct person_t*);

  #endif
  ```

  Person í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ëŠ” í—¤ë” íŒŒì¼
  ìƒì„±ì í•¨ìˆ˜â†’person ê°ì²´ ìƒì„±ì„ ìœ„í•œ ëª¨ë“  ê°’ì„ ë°›ìŒ
  ì†ì„± êµ¬ì¡°ì²´ person_tì— ëŒ€í•œ ì‹¤ì œ ì •ì˜ë¥¼ í¬í•¨í•˜ë©´ ì•ˆë¨(ìº¡ìŠí™”)â†’ë¹„ê³µê°œ í—¤ë” íŒŒì¼(ì´ í—¤ë”ì˜ ì‹¤ì œ ì •ì˜ë¥¼ í¬í•¨í•˜ëŠ” í—¤ë” íŒŒì¼)

  ```c
  #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_2_PERSON_P_H
  #define EXTREME_C_EXAMPLES_CHAPTER_8_2_PERSON_P_H

  // ë¹„ê³µê°œ ì •ì˜
  typedef struct {
    char first_name[32];
    char last_name[32];
    unsigned int birth_year;
  } person_t;

  #endif
  ```

  ì´ëŠ” Person í´ë˜ìŠ¤ì˜ ì¼ë¶€ë¶„, student_t ì†ì„± êµ¬ì¡°ì²´ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ í•„ìš”

  ```c
  #include <stdlib.h>
  #include <string.h>

  // person_tëŠ” ë‹¤ìŒ í—¤ë” íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
  #include "ExtremeC_examples_chapter8_2_person_p.h"

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  person_t* person_new() {
    return (person_t*)malloc(sizeof(person_t));
  }

  // ìƒì„±ì
  void person_ctor(person_t* person,
                   const char* first_name,
                   const char* last_name,
                   unsigned int birth_year) {
    strcpy(person->first_name, first_name);
    strcpy(person->last_name, last_name);
    person->birth_year = birth_year;
  }

  // ì†Œë©¸ì
  void person_dtor(person_t* person) {
    // í•  ì¼ ì—†ìŒ
  }

  // í–‰ìœ„ í•¨ìˆ˜
  void person_get_first_name(person_t* person, char* buffer) {
    strcpy(buffer, person->first_name);
  }

  void person_get_last_name(person_t* person, char* buffer) {
    strcpy(buffer, person->last_name);
  }

  unsigned int person_get_birth_year(person_t* person) {
    return person->birth_year;
  }
  ```

  Person í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ êµ¬í˜„ì„ ë‚˜íƒ€ëƒ„

  ```c
  #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_2_STUDENT_H
  #define EXTREME_C_EXAMPLES_CHAPTER_8_2_STUDENT_H

  // ì „ë°© ì„ ì–¸
  struct student_t;

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  struct student_t* student_new();

  // ìƒì„±ì
  void student_ctor(struct student_t*,
                    const char*  /* first name */,
                    const char*  /* last name */,
                    unsigned int /* birth year */,
                    const char*  /* student number */,
                    unsigned int /* passed credits */);

  // ì†Œë©¸ì
  void student_dtor(struct student_t*);

  // í–‰ìœ„ í•¨ìˆ˜
  void student_get_student_number(struct student_t*, char*);
  unsigned int student_get_passed_credits(struct student_t*);

  #endif
  ```

  Student í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‚˜íƒ€ëƒ„
  student ê°ì²´ê°€ ì‹¤ì œë¡œ person ê°ì²´ë¥¼ í¬í•¨â†’Person í´ë˜ìŠ¤ì˜ ìƒì„±ìì™€ ë¹„ìŠ·í•œ ì¸ìë¥¼ ë°›ìŒ
  í–‰ìœ„ í•¨ìˆ˜ê°€ 2ê°œë¿: Person í´ë˜ìŠ¤ì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸

  ```c
  #include <stdlib.h>
  #include <string.h>

  #include "ExtremeC_examples_chapter8_2_person.h"

  // 1. person_tëŠ” ë‹¤ìŒ í—¤ë” íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆìœ¼ë©° ì—¬ê¸°ì—ì„œ í•„ìš”í•©ë‹ˆë‹¤.
  #include "ExtremeC_examples_chapter8_2_person_p.h"

  // ì „ë°© ì„ ì–¸
  typedef struct {
    // 2. ì—¬ê¸°ì—ì„œ person í´ë˜ìŠ¤ì—ì„œ ëª¨ë“  ì†ì„±ì„ ìƒì†ë°›ìœ¼ë©°,
    // ì´ ì¤‘ì²©ìœ¼ë¡œ ì¸í•´ person í´ë˜ìŠ¤ì˜ ëª¨ë“  í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    person_t person;
    char* student_number;
    unsigned int passed_credits;
  } student_t;

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  student_t* student_new() {
    return (student_t*)malloc(sizeof(student_t));
  }

  // ìƒì„±ì
  void student_ctor(student_t* student,
                    const char* first_name,
                    const char* last_name,
                    unsigned int birth_year,
                    const char* student_number,
                    unsigned int passed_credits) {
    // 3. ë¶€ëª¨ í´ë˜ìŠ¤ì— ëŒ€í•œ ìƒì„±ì í˜¸ì¶œí•˜ê¸°
    person_ctor((struct person_t*)student,
            first_name, last_name, birth_year);
    student->student_number = (char*)malloc(16 * sizeof(char));
    strcpy(student->student_number, student_number);
    student->passed_credits = passed_credits;
  }

  // ì†Œë©¸ì
  void student_dtor(student_t* student) {
    // 4. ìì‹ ê°ì²´ë¥¼ ë¨¼ì € ì†Œë©¸ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.
    free(student->student_number);
    // ê·¸ëŸ° ë‹¤ìŒ, ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì†Œë©¸ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
    person_dtor((struct person_t*)student);
  }

  // í–‰ìœ„ í•¨ìˆ˜
  void student_get_student_number(student_t* student,
                                  char* buffer) {
    strcpy(buffer, student->student_number);
  }

  unsigned int student_get_passed_credits(student_t* student) {
    return student->passed_credits;
  }
  ```

  1. Person í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ í—¤ë”ë¥¼ í¬í•¨
  2. person_tê°€ ì´ë¯¸ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•¨
  3. ë¶€ëª¨ì˜ ìƒì„±ì í˜¸ì¶œâ†’ë¶€ëª¨ ê°ì²´ì— ëŒ€í•œ ì†ì„±ì„ ì´ˆê¸°í™”
  4. ìì‹ ìˆ˜ì¤€ ë‹¤ìŒ ë¶€ëª¨ ìˆ˜ì¤€ì—ì„œ ì†Œë©¸ìë¥¼ í˜¸ì¶œ

  ```c
  #include <stdio.h>
  #include <stdlib.h>

  #include "ExtremeC_examples_chapter8_2_person.h"
  #include "ExtremeC_examples_chapter8_2_student.h"

  int main(int argc, char** argv) {
    // student ê°ì²´ë¥¼ ë§Œë“¤ê³  ìƒì„±í•˜ê¸°
    struct student_t* student = student_new();
    student_ctor(student, "John", "Doe",
            1987, "TA5667", 134);

    // ì´ì œ personì˜ ì†ì„±ì„ student ê°ì²´ì—ì„œ ì½ê¸° ìœ„í•´ personì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    char buffer[32];

    // ë¶€ëª¨ì˜ ìë£Œí˜•ì— ëŒ€í•œ í¬ì¸í„°ë¡œ ì—…ìºìŠ¤íŒ…í•˜ê¸°
    struct person_t* person_ptr = (struct person_t*)student;

    person_get_first_name(person_ptr, buffer);
    printf("First name: %s\n", buffer);

    person_get_last_name(person_ptr, buffer);
    printf("Last name: %s\n", buffer);

    printf("Birth year: %d\n", person_get_birth_year(person_ptr));

    // ì´ì œ student ê°ì²´ì— í•œì •ëœ ì†ì„±ì„ ì½ìŠµë‹ˆë‹¤.
    student_get_student_number(student, buffer);
    printf("Student number: %s\n", buffer);

    printf("Passed credits: %d\n",
            student_get_passed_credits(student));

    // student ê°ì²´ë¥¼ ì†Œë©¸ ë° í•´ì œí•˜ê¸°
    student_dtor(student);
    free(student);

    return 0;
  }
  ```

  Personê³¼ Student í´ë˜ìŠ¤ ëª¨ë‘ì— ëŒ€í•œ ê³µìš© ì¸í„°í˜ì´ìŠ¤ë¥¼ í¬í•¨, but ê°ì²´ëŠ” studentë§Œ ìƒì„±
  studentëŠ” person ê°ì²´ì—ì„œ ëª¨ë“  ì†ì„±ì„ ìƒì† ë°›ìŒâ†’Person í´ë˜ìŠ¤ì˜ í–‰ìœ„ í•¨ìˆ˜ë¡œ ì½ì„ ìˆ˜ ìˆìŒ

  ```c
  gcc -c ExtremeC_examples_chapter8_2_person.c -o person.o
  gcc -c ExtremeC_examples_chapter8_2_student.c -o student.o
  gcc -c ExtremeC_examples_chapter8_2_main.c -o main.o
  gcc person.o student.o main.o -o ex8_2.out
  ./ex8_2.out
  //First name: John
  //Last name: Doe
  //Birth year: 1987
  //Student number: TA5667
  //Passed credits: 134
  ```

â˜‘ï¸ **Cì˜ ìƒì†ì— ê´€í•œ ë‘ ë²ˆì§¸ ì ‘ê·¼ë²•**

ë‘ ë²ˆì§¸ ì ‘ê·¼ë²•ì— ëŒ€í•´ ì˜ˆì œ 8-3ì—ì„œ ì„¤ëª…

ë¶€ëª¨ì˜ êµ¬ì¡°ì²´ ë³€ìˆ˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„° ìƒì„±â†’ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ êµ¬í˜„ê³¼ ë…ë¦½ì â†’ì •ë³´ ì€ë‹‰

ì˜ˆì œ 8-3ì€ 8-2ì™€ ë§¤ìš° ë¹„ìŠ·í•˜ì§€ë§Œ, Studentê°€ Personí´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ ì •ì˜ì—ëŠ” ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì°¨ì´ ì¡´ì¬â†’ìì‹ í´ë˜ìŠ¤ êµ¬í˜„ì„ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ë¶€ëª¨ í´ë˜ìŠ¤ êµ¬í˜„ ë³€ê²½ ê°€ëŠ¥

ì˜ˆì œ 8-2ëŠ” person_tì˜ ì‹¤ì œ ì •ì˜ì— ì ‘ê·¼â†’ì •ë³´ ì€ë‹‰ ì›ë¦¬ ìœ„ë°˜ ê°€ëŠ¥ì„±

- ì˜ˆì œ 8-3

  ```c
  // ì „ë°© ì„ ì–¸
  struct student_t;

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  struct student_t* student_new();

  // ìƒì„±ì
  void student_ctor(struct student_t*,
                    const char*  /* first name */,
                    const char*  /* last name */,
                    unsigned int /* birth year */,
                    const char*  /* student number */,
                    unsigned int /* passed credits */);

  // ì†Œë©¸ì
  void student_dtor(struct student_t*);

  // í–‰ìœ„ í•¨ìˆ˜
  void student_get_first_name(struct student_t*, char*);
  void student_get_last_name(struct student_t*, char*);
  unsigned int student_get_birth_year(struct student_t*);
  void student_get_student_number(struct student_t*, char*);
  unsigned int student_get_passed_credits(struct student_t*);

  #endif
  ```

  Student í´ë˜ìŠ¤ì˜ ìƒˆë¡œìš´ ê³µìš© ì¸í„°í˜ì´ìŠ¤: ì²« ë²ˆì§¸ ì ‘ê·¼ë²•ê³¼ ë‹¬ë¦¬ ë‘ ë²ˆì§¸ ì ‘ê·¼ë²•ì—ì„œëŠ” Student í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤ê°€ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.
  student_t í¬ì¸í„°ë¥¼ person_t í¬ì¸í„°ë¡œ ë³€í™˜í•  ìˆ˜ ì—†ìŒâ†’ì—…ìºìŠ¤íŒ… ë¶ˆê°€ëŠ¥â†’Student í´ë˜ìŠ¤ëŠ” Person í´ë˜ìŠ¤ì—ì„œ ì„ ì–¸í•œ ëª¨ë“  í–‰ìœ„ í•¨ìˆ˜ë¥¼ ë°˜ë³µí•´ì•¼ í•¨(p.323ê³¼ ë¹„êµ)

  ```c
  #include <stdlib.h>
  #include <string.h>

  // ë¹„ê³µê°œ ì •ì˜
  typedef struct {
    char first_name[32];
    char last_name[32];
    unsigned int birth_year;
  } person_t;

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  person_t* person_new() {
    return (person_t*)malloc(sizeof(person_t));
  }

  // ìƒì„±ì
  void person_ctor(person_t* person,
                   const char* first_name,
                   const char* last_name,
                   unsigned int birth_year) {
    strcpy(person->first_name, first_name);
    strcpy(person->last_name, last_name);
    person->birth_year = birth_year;
  }

  // ì†Œë©¸ì
  void person_dtor(person_t* person) {
    // í•  ì¼ ì—†ìŒ
  }

  // í–‰ìœ„ í•¨ìˆ˜
  void person_get_first_name(person_t* person, char* buffer) {
    strcpy(buffer, person->first_name);
  }

  void person_get_last_name(person_t* person, char* buffer) {
    strcpy(buffer, person->last_name);
  }

  unsigned int person_get_birth_year(person_t* person) {
    return person->birth_year;
  }
  ```

  Person í´ë˜ìŠ¤ì˜ ìƒˆë¡œìš´ êµ¬í˜„: person_tì˜ ë¹„ê³µê°œ ì •ì˜ê°€ ì†ŒìŠ¤ ë‚´ì— ì¡´ì¬, ë¹„ê³µê°œ í—¤ë” íŒŒì¼ì´ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ(p.321ê³¼ ë¹„êµ)â†’Student í´ë˜ìŠ¤ ê°™ì€ íƒ€ í´ë˜ìŠ¤ì™€ ì •ì˜ë¥¼ ê³µìœ í•˜ì§€ ì•Šê² ë‹¤ëŠ” ëœ»(Person í´ë˜ìŠ¤ì— ëŒ€í•œ ìº¡ìŠí™”)

  ```c
  #include <stdlib.h>
  #include <string.h>

  // 1. person í´ë˜ìŠ¤ì— ëŒ€í•œ ê³µìš© ì¸í„°í˜ì´ìŠ¤
  #include "ExtremeC_examples_chapter8_3_person.h"

  // ì „ë°© ì„ ì–¸
  typedef struct {
    char* student_number;
    unsigned int passed_credits;
    // 2. person_tê°€ ë¶ˆì™„ì „í•œ í˜•ì‹ì´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì— í¬ì¸í„°ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
    struct person_t* person;
  } student_t;

  // ë©”ëª¨ë¦¬ í• ë‹¹ì
  student_t* student_new() {
    return (student_t*)malloc(sizeof(student_t));
  }

  // ìƒì„±ì
  void student_ctor(student_t* student,
                    const char* first_name,
                    const char* last_name,
                    unsigned int birth_year,
                    const char* student_number,
                    unsigned int passed_credits) {
    // 3. ë¶€ëª¨ ê°ì²´ì— ëŒ€í•œ ë©”ëª¨ë¦¬ í• ë‹¹í•˜ê¸°
    student->person = person_new();
    person_ctor(student->person, first_name,
            last_name, birth_year);
    student->student_number = (char*)malloc(16 * sizeof(char));
    strcpy(student->student_number, student_number);
    student->passed_credits = passed_credits;
  }

  // ì†Œë©¸ì
  void student_dtor(student_t* student) {
    // ë¨¼ì € ìì‹ ê°ì²´ë¥¼ ì†Œë©¸ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.
    free(student->student_number);
    // ê·¸ëŸ° ë‹¤ìŒ, ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì†Œë©¸ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
    person_dtor(student->person);
    // ê·¸ë¦¬ê³  ë¶€ëª¨ ê°ì²´ì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•´ì•¼ í•©ë‹ˆë‹¤.
    free(student->person);
  }

  // 4. í–‰ìœ„ í•¨ìˆ˜
  void student_get_first_name(student_t* student, char* buffer) {
    // personì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    person_get_first_name(student->person, buffer);
  }

  void student_get_last_name(student_t* student, char* buffer) {
    // personì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    person_get_last_name(student->person, buffer);
  }

  unsigned int student_get_birth_year(student_t* student) {
    // personì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    return person_get_birth_year(student->person);
  }

  void student_get_student_number(student_t* student,
                                  char* buffer) {
    strcpy(buffer, student->student_number);
  }

  unsigned int student_get_passed_credits(student_t* student) {
    return student->passed_credits;
  }
  ```

  Student í´ë˜ìŠ¤ì˜ ìƒˆë¡œìš´ êµ¬í˜„(p.324ì™€ ë¹„êµ)

  1. Person í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤ë¥¼ í—¤ë” íŒŒì¼ì— í¬í•¨
  2. student_tì˜ ì •ì˜ ë¶€ë¶„: í¬ì¸í„° í•„ë“œ ì¶”ê°€, ì²«ë²ˆì§¸ í•„ë“œì¼ í•„ìš”ëŠ” x, ìƒí˜¸ë³€í™˜ í•  ìˆ˜ ì—†ìŒ
  3. ë¶€ëª¨ ê°ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”
  4. Student í´ë˜ìŠ¤ëŠ” ìì‹ ì˜ í–‰ìœ„ í•¨ìˆ˜ë“¤ì„ ë…¸ì¶œ, ë˜í¼ í•¨ìˆ˜ ë…¸ì¶œâ†’Student ê°ì²´ ìì²´ë¡œëŠ” Person ê°ì²´ì˜ ë¹„ê³µê°œ ì†ì„±ì„ ì•Œ ìˆ˜ ì—†ìŒ

  ```c
  #include <stdio.h>
  #include <stdlib.h>

  #include "ExtremeC_examples_chapter8_3_student.h"

  int main(int argc, char** argv) {
    // student ê°ì²´ë¥¼ ë§Œë“¤ê³  ìƒì„±í•˜ê¸°
    struct student_t* student = student_new();
    student_ctor(student, "John", "Doe",
            1987, "TA5667", 134);

    // student í¬ì¸í„°ëŠ” person í¬ì¸í„°ê°€ ì•„ë‹ˆë©°
    // student ê°ì²´ì— ìˆëŠ” ë¹„ê³µê°œ ë¶€ëª¨ í¬ì¸í„°ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ,
    // studentì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    char buffer[32];
    student_get_first_name(student, buffer);
    printf("First name: %s\n", buffer);

    student_get_last_name(student, buffer);
    printf("Last name: %s\n", buffer);

    printf("Birth year: %d\n", student_get_birth_year(student));

    student_get_student_number(student, buffer);
    printf("Student number: %s\n", buffer);

    printf("Passed credits: %d\n",
            student_get_passed_credits(student));

    // student ê°ì²´ ì†Œë©¸ ë° í•´ì œí•˜ê¸°
    student_dtor(student);
    free(student);

    return 0;
  }
  ```

  person.h í¬í•¨xâ†’Person í´ë˜ìŠ¤ì˜ í–‰ìœ„ í•¨ìˆ˜ ì‚¬ìš©x(p.325ì™€ ë¹„êµ)

  ```c
  gcc -c ExtremeC_examples_chapter8_3_person.c -o person.o
  gcc -c ExtremeC_examples_chapter8_3_student.c -o student.o
  gcc -c ExtremeC_examples_chapter8_3_main.c -o main.o
  gcc person.o student.o main.o -o ex8_3.out
  ./ex8_3.out
  //First name: John
  //Last name: Doe
  //Birth year: 1987
  //Student number: TA5667
  //Passed credits: 134
  ```

  ì¶œë ¥ ê²°ê³¼ëŠ” ê°™ìŒ

â˜‘ï¸ **ë‘ ê°€ì§€ ì ‘ê·¼ë²• ë¹„êµí•˜ê¸°**

- ì²« ë²ˆì§¸ ì ‘ê·¼ë²•

  - í•©ì„± ê´€ê³„
  - ìì‹ì˜ ì†ì„± êµ¬ì¡°ì²´ ì•ˆì— êµ¬ì¡°ì²´ ë³€ìˆ˜ ì¡´ì¬
  - ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ë¹„ê³µê°œ êµ¬í˜„ì— ì ‘ê·¼í•˜ëŠ” ë°ì— ì˜ì¡´
  - ë¶€ëª¨ì™€ ìì‹ì˜ ìë£Œí˜•ì€ ë§¤ìš° ì˜ì¡´ì 
  - ë¶€ëª¨ê°€ ì˜¤ì§ í•˜ë‚˜
  - Cì˜ ë‹¨ì¼ ìƒì† sngle inertanceì„ êµ¬í˜„
  - ë¶€ëª¨ì˜ êµ¬ì¡°ì²´ ë³€ìˆ˜ëŠ” ìì‹ í´ë˜ìŠ¤ì˜ ì†ì„± êµ¬ì¡°ì²´ì˜ ì²« ë²ˆì§¸ í•„ë“œ
  - ë¶€ëª¨ í´ë˜ìŠ¤ì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©

- ë‘ ë²ˆì§¸ ì ‘ê·¼ë²•
  - í•©ì„± ê´€ê³„
  - ë¶€ëª¨ì˜ ì†ì„± êµ¬ì¡°ì²´ì˜ ë¶ˆì™„ì „ ìë£Œí˜•ìœ¼ë¡œë¶€í„° êµ¬ì¡°ì²´ í¬ì¸í„°ë¥¼ ë‘ë¯€ë¡œ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ êµ¬í˜„ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
  - í´ë˜ìŠ¤ë“¤ì€ ì„œë¡œì— ëŒ€í•´ ë…ë¦½ì 
  - ë¶€ëª¨ì˜ êµ¬í˜„ ë‚´ë¶€ì— ìˆëŠ” ëª¨ë“  ê²ƒì€ ìì‹ì—ê²Œ ìˆ¨ê²¨ì ¸ ìˆìŒ
  - ì›í•˜ëŠ” ë§Œí¼ ë§ì€ ë¶€ëª¨ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‹¤ì¤‘ ìƒì†mutpe nhertanceoë¼ëŠ” ê°œë…
  - ë¶€ëª¨ ê°ì²´ì— ëŒ€í•œ í¬ì¸í„°ë¥¼ êµ¬ì¡°ì²´ ë‚´ì˜ ì–´ë””ë“ 
  - ìì‹ í´ë˜ìŠ¤ì˜ ìƒˆë¡œìš´ í–‰ìœ„ í•¨ìˆ˜ë¥¼ í†µí•´ ë¶€ëª¨ì˜ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì „ë‹¬

<h2> â­ 8.2 ë‹¤í–¥ì„± ì†Œê°œ </h2>

â“ë‹¤í–¥ì„±ì´ë€ â†’ ì„œë¡œ ë‹¤ë¥¸ í–‰ìœ„ë¥¼ ê°–ëŠ” ê°™ì€ ì½”ë“œ(ê³µìš© ì¸í„°í˜ì´ìŠ¤)ë¥¼ ë‘ëŠ” ê¸°ë²•ì…ë‹ˆë‹¤.

â†’ ë‹¤í–¥ì„±ì„ í†µí•´ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ë‹¤ì‹œ ì»´íŒŒì¼í•˜ì§€ ì•Šê³ ë„ ì½”ë“œë¥¼ ìƒì†í•˜ê±°ë‚˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- Animal, Cat, Duck ìë£Œí˜•ì— ëŒ€í•œ ê°ì²´ ì„¸ ê°œë¥¼ ìƒì„±í•˜ê¸°

  ```jsx
  struct animal_t*animal = animal_malloc();
  animal_ctor(animal);

  struct cat_t*cat = cat_malloc();
  cat_ctor(cat);

  struct duck_t*duck = duck_malloc();
  duck_ctor(aduck);

  ```

  - catê³¼ duckí´ë˜ìŠ¤ëŠ” animalí´ë˜ìŠ¤ì˜ ìì‹ì´ë¼ê³  ê°€ì •í•©ë‹ˆë‹¤. ì´ë•Œ ë‹¤í–¥ì„±ì´ ì—†ë‹¤ë©´ sound í•¨ìˆ˜ë¥¼ ê° ê°ì²´ì—ì„œ í˜¸ì¶œí–ˆì„ ê²ë‹ˆë‹¤.

  ```jsx
  animal_sound(animal);
  cat_sound(cat);
  duck_sound(duck);
  ```

  - í•˜ì§€ë§Œ ë‹¤í˜•ì  í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í˜¸ì¶œë©ë‹ˆë‹¤.

  ```jsx
  animal_sound(animal);
  animal_sound((struct animal_t*)cat);
  animal_sound((struct animal_t*)duck);
  ```

  - animal_soundê°€ ë‹¤í˜•ì ì´ë¼ë©´ ë‹¤ë¥¸ ê°ì²´ í¬ì¸í„°ë¥¼ ì „ë‹¬í–ˆì„ ë•Œ ê°ì ë‹¤ë¥¸ ì†Œë¦¬ê°€ ì¶œë ¥ ë  ê²ƒì…ë‹ˆë‹¤. ê°™ì€ animal_soundë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ í¬ì¸í„°ëŠ” ë‹¤ë¥¸ ê²ƒìœ¼ë¡œ ì‚¬ìš©í•˜ì˜€ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì„ ë‚´ë¶€ì—ì„œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.

  - ì´ ì½”ë“œëŠ” ë‹¤í˜•ì  ì½”ë“œë¡œ Animalì´ë¼ëŠ” í´ë˜ìŠ¤ì™€ í•¨ê»˜ Cat , Duck í´ë˜ìŠ¤ì™€ ìƒì† ê´€ê³„ì…ë‹ˆë‹¤. duck_tì™€ cat_t í¬ì¸í„°ë¥¼ animal_t í¬ì¸í„°ë¡œ ë³€í™˜í•˜ë ¤ê³  í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

  ```jsx
  typedef struct {
  ...
  }animal_t

  typedef struct {
  aniaml_t animal;
  ...
  }cat_t;

  typedef struct{
  aniaml_t animal;
  ...
  }duck_t;
  ```

  - ìƒì†ì„ êµ¬í˜„í•˜ëŠ” ì²« ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ êµ¬í˜„ì— ì ‘ê·¼í–ˆìœ¼ë©°, ì—¬ê¸°ì„œ duck_tì™€ cat_t ì†ì„± êµ¬ì¡°ì²´ ì •ì˜ì˜ ì²« ë²ˆì§¸ í•„ë“œë¡œ animal_t ìë£Œí˜•ì¸ êµ¬ì¡°ì²´ ë³€ìˆ˜ë¥¼ ë‘ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.
  - ì´ ì„¤ì •ì„ í†µí•´ì„œ duck_tì™€ cat_t í¬ì¸í„°ë¥¼ animal_t í¬ì¸í„°ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚œ ë’¤ ë‘ ìì‹ í´ë˜ìŠ¤ì— ëŒ€í•œ í–‰ìœ„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

â˜‘ï¸ **ë‹¤í–¥ì„±ì´ í•„ìš”í•œ ì´ìœ **

â†’ í˜„ì¬ì˜ ë¡œì§ì„ ìì£¼ ìˆ˜ì •í•˜ê³  ì‹¶ì§€ëŠ” ì•Šì„ ë•Œ ë‹¤í–¥ì„±ì„ ì´ìš©í•˜ë©´ í•„ìš”í•œ ë³€ê²½ íšŸìˆ˜ë¥¼ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

â†’ ì¶”ìƒí™” ë•Œë¬¸ì— ë‹¤í–¥ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤. ì¶”ìƒì ì¸ ìë£Œí˜•(í´ë˜ìŠ¤)ë¥¼ ê°€ì§ˆ ë•Œ, ìì‹ í´ë˜ìŠ¤ì—ì„œëŠ” ì˜¤ë²„ë¼ì´ë”©ì´ ë˜ì–´ì•¼ í•˜ëŠ” í–‰ìœ„ë¥¼ ê°–ëŠ”ë° ì´ë•Œ ë‹¤í–¥ì„±ì´ í•µì‹¬ì ì…ë‹ˆë‹¤.

â˜‘ï¸ **Cì—ì„œ ë‹¤í˜•ì  í–‰ìœ„ë¥¼ ê°–ëŠ” ë°©ë²•**

Cì—ì„œ ë‹¤í–¥ì„±ì„ ê°€ì§ˆë ¤ë©´ ìƒì†ì„ êµ¬í˜„í•˜ëŠ” ì²« ë²ˆì§¸ ì ‘ê·¼ë²•ì„ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤. ë˜í•œ ë‹¤í–¥ì  í–‰ìœ„ë¥¼ ë‹¬ì„±í•˜ë ¤ë©´ í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ì†ì„± êµ¬ì¡°ì²´ ë‚´ì˜ í•„ë“œì— ë‘ì–´ì•¼ í•©ë‹ˆë‹¤.

- ì˜ˆì œ 8-4

  - Animal í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_animal.h
    // Description: Public interface of the animal class

    #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_4_ANIMAL_H
    #define EXTREME_C_EXAMPLES_CHAPTER_8_4_ANIMAL_H

    // Forward declaration
    struct animal_t;

    // Memory allocator
    struct animal_t* animal_new();

    // Constructor
    void animal_ctor(struct animal_t*);

    // Destructor
    void animal_dtor(struct animal_t*);

    // Behavior functions
    void animal_get_name(struct animal_t*, char*);
    void animal_sound(struct animal_t*);

    #endif
    ```

    - Animal í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤ì—ì„œëŠ” 2ê°œì˜ í–‰ìœ„í•¨ìˆ˜ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
      - animal_sound í•¨ìˆ˜ëŠ” ë‹¤í˜•ì ìœ¼ë¡œ, ìì‹ í´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë”©ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - animal_get_nameì€ ë‹¤í˜•ì ì´ì§€ ì•Šìœ¼ë©° ìì‹ í´ë˜ìŠ¤ê°€ ì˜¤ë²„ë¼ì´ë”©ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

  - Animal í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ í—¤ë” (Animal í´ë˜ìŠ¤ì˜ ì†ì„± êµ¬ì¡°ì²´ì— ê´€í•œ ì‹¤ì œ ì •ì˜ í¬í•¨)- ìƒì†ì„ êµ¬í˜„í•˜ëŠ” ì²«ë²ˆì§¸ ì ‘ê·¼ë²•ìœ¼ë¡œ ì·¨í•©ë‹ˆë‹¤

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_animal_p.h
    // Description: Private defintion of the attribute structure
    //              of the animal class

    #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_4_ANIMAL_P_H
    #define EXTREME_C_EXAMPLES_CHAPTER_8_4_ANIMAL_P_H

    // ê°€ë¦¬í‚¤ëŠ”ë° í•„ìš”í•œ í•¨ìˆ˜ í¬ì¸í„°í˜•
    // different morphs of animal_sound
    typedef void (*sound_func_t)(void*);

    // Forward declaration
    typedef struct {
      char* name;
      // This member is a pointer to the function which
      // performs the actual sound behavior
      sound_func_t sound_func;
    } animal_t;

    #endif
    ```

    - ëª¨ë“  ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì† ë°›ì€ í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ì˜¤ë²„ë¼ì´ë”©í•˜ë ¤ëŠ” ê°ê°ì˜ ìì‹ í´ë˜ìŠ¤ì— ëŒ€í•œ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
      - ì´ëŸ¬í•œ ì´ìœ ë¡œ í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - ì¦‰ ëª¨ë“  ìì‹ í´ë˜ìŠ¤ëŠ” animal_sound í•¨ìˆ˜ì— ëŒ€í•œ ìì‹ ë§Œì˜ ë²„ì „ì„ ì œê³µ í•  ìˆ˜ ìˆê³ , ìì‹ í´ë˜ìŠ¤ê°€ animal_soundë¥¼ ì˜¤ë²„ë¼ì´ë”©í–ˆë‹¤ë©´, ì˜¤ë²„ë¼ì´ë”©ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ì•¼í•˜ê³  ì´ë•Œ í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
      - animal_tì˜ ê° ì¸ìŠ¤í„´ìŠ¤(í´ë˜ìŠ¤ì—ì„œ í˜„ì¬ ìƒì„±ëœ ê°ì²´)ëŠ” animal_sound í–‰ìœ„ ì „ìš©ì˜ í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ê°€ì§ˆ ê²ƒì´ê³ , ê·¸ í¬ì¸í„°ëŠ” í´ë˜ìŠ¤ ë‚´ì˜ ë‹¤í˜•ì  í•¨ìˆ˜ì— ëŒ€í•œ ì‹¤ì œ ì •ì˜ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.

  - Animal í´ë˜ìŠ¤ì— ëŒ€í•œ ì •ì˜

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_animal.c
    // Description: Private definition of the behavior functions
    //              of the animal class

    #include <stdlib.h>
    #include <string.h>
    #include <stdio.h>

    #include "ExtremeC_examples_chapter8_4_animal_p.h"

    // Default definition of the animal_sound at the parent level
    void __animal_sound(void* this_ptr) { //__animal_soundëŠ” animal_sound í•¨ìˆ˜ì˜ ê¸°ë³¸ í–‰ìœ„ê°€ ë˜ì–´ì•¼í•¨.
      animal_t* animal = (animal_t*)this_ptr;
      printf("%s: Beeeep\n", animal->name);
    }

    // Memory allocator
    animal_t* animal_new() {
      return (animal_t*)malloc(sizeof(animal_t));
    }

    // Constructor
    void animal_ctor(animal_t* animal) {
      animal->name = (char*)malloc(10 * sizeof(char));
      strcpy(animal->name, "Animal");
      // Set the function pointer to point to the default definition
      animal->sound_func = __animal_sound;
    } //__animal_soundì˜ ì£¼ì†Œë¥¼ animal ê°ì²´ì˜ í•¨ìˆ˜ í¬ì¸í„°ì¸ sound_funcì— ì €ì¥
    // ì´ ì„¤ì •ìœ¼ë¡œ ëª¨ë“  ìì‹ ê°ì²´ëŠ” ì´ í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ìƒì†í•˜ê³  í•¨ìˆ˜ í¬ì¸í„°ëŠ” __animal_soundì˜ ê¸°ë³¸ ì •ì˜ë¥¼ ê°€ë¥´í‚µë‹ˆë‹¤.

    // Destructor
    void animal_dtor(animal_t* animal) {
      free(animal->name);
    }

    // Behavior functions
    void animal_get_name(animal_t* animal, char* buffer) {
      strcpy(buffer, animal->name);
    }

    void animal_sound(animal_t* animal) {
      // í•¨ìˆ˜ í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” í•¨ìˆ˜ í˜¸ì¶œí•¨.
      animal->sound_func(animal);
    } //sound_funcê°€ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ê°€ë¦¬í‚¬ ë•Œ animal_soundë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ sound_funcê°€ ê°€ë¦¬í‚¤ëŠ” í•¨ìˆ˜ê°€ í˜¸ì¶œë¨.
      //sound_func = __animal_soundì— í•´ë‹¹í•˜ëŠ” sound í–‰ìœ„ì˜ ì‹¤ì œ ì •ì˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” í•¨ìˆ˜ í¬ì¸í„° í•„ë“œ
    ```

  - Cat í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_cat.h
    // Description: Public interface of the cat class

    #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_4_CAT_H
    #define EXTREME_C_EXAMPLES_CHAPTER_8_4_CAT_H

    // Forward declaration
    struct cat_t;

    // Memory allocator
    struct cat_t* cat_new();

    // Constructor
    void cat_ctor(struct cat_t*);

    // Destructor
    void cat_dtor(struct cat_t*);

    // All behavior functions are inherited from the animal class.

    #endif
    ```

    - Cat í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì¸ Animal í´ë˜ìŠ¤ë¡œë¶€í„° soundë¥¼ ìƒì† ë°›ìŠµë‹ˆë‹¤.

  - Cat í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ êµ¬í˜„

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_cat.c
    // Description: Private defintions of the class cat

    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    #include "ExtremeC_examples_chapter8_4_animal.h"
    #include "ExtremeC_examples_chapter8_4_animal_p.h"

    typedef struct {
      animal_t animal;
    } cat_t;

    // Define a new behavior for the cat's sound
    void __cat_sound(void* ptr) {  //catì˜ soundë¥¼ ìœ„í•œ ìƒˆë¡œìš´ í•¨ìˆ˜ì¸ __cat_soundë¥¼ ì •ì˜
      animal_t* animal = (animal_t*)ptr;
      printf("%s: Meow\n", animal->name);
    }

    // Memory allocator
    cat_t* cat_new() {
      return (cat_t*)malloc(sizeof(cat_t));
    }

    // Constructor
    void cat_ctor(cat_t* cat) {
      animal_ctor((struct animal_t*)cat);
      strcpy(cat->animal.name, "Cat");
      // Point to the new behavior function. Overriding
      // is actually happening here.
      cat->animal.sound_func = __cat_sound; //ì˜¤ë²„ë¼ì´ë”© ë°œìƒ
    }

    // Destructor
    void cat_dtor(cat_t* cat) {
      animal_dtor((struct animal_t*)cat);
    }
    ```

    - cat ê°ì²´ëŠ” **animal_sound ëŒ€ì‹ ì— ì‹¤ì œë¡œ **cat_soundë¥¼ í˜¸ì¶œí•˜ê²Œ ë§Œë“œëŠ” ì˜¤ë²„ë¼ì´ë”©ì„ ë°œìƒì‹œì¼°ìŠµë‹ˆë‹¤.

  - Duck í´ë˜ìŠ¤ì˜ ê³µìš© ì¸í„°í˜ì´ìŠ¤

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_duck.h
    // Description: Public interface of the duck class

    #ifndef EXTREME_C_EXAMPLES_CHAPTER_8_4_DUCK_H
    #define EXTREME_C_EXAMPLES_CHAPTER_8_4_DUCK_H

    // Forward declaration
    struct duck_t;

    // Memory allocator
    struct duck_t* duck_new();

    // Constructor
    void duck_ctor(struct duck_t*);

    // Destructor
    void duck_dtor(struct duck_t*);

    // All behavior functions are inherited from the animal class.

    #endif
    ```

  - Duck í´ë˜ìŠ¤ì˜ ë¹„ê³µê°œ êµ¬í˜„

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_duck.c
    // Description: Private defintions of the class duck

    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    #include "ExtremeC_examples_chapter8_4_animal.h"
    #include "ExtremeC_examples_chapter8_4_animal_p.h"

    typedef struct {
      animal_t animal;
    } duck_t;

    // Define a new behavior for the duck's sound
    void __duck_sound(void* ptr) {
      animal_t* animal = (animal_t*)ptr;
      printf("%s: Quacks\n", animal->name);
    }

    // Memory allocator
    duck_t* duck_new() {
      return (duck_t*)malloc(sizeof(duck_t));
    }

    // Constructor
    void duck_ctor(duck_t* duck) {
      animal_ctor((struct animal_t*)duck);
      strcpy(duck->animal.name, "Duck");
      // Point to the new behavior function. Overriding
      // is actually happening here.
      duck->animal.sound_func = __duck_sound;
    }

    // Destructor
    void duck_dtor(duck_t* duck) {
      animal_dtor((struct animal_t*)duck);
    }
    ```

    - Duck í´ë˜ìŠ¤ ë˜í•œ ìƒˆë¡œìš´ ë¹„ê³µê°œ í–‰ìœ„ í•¨ìˆ˜ì¸ \_\_duck_soundëŠ” duckì— í•œì •ëœ ì†Œë¦¬ë¥¼ ë‚´ë„ë¡ soundí–‰ìœ„ì˜ ê¸°ë³¸ ì •ì˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í–ˆìŠµë‹ˆë‹¤.
    -

  - ë©”ì¸ ì‹œë‚˜ë¦¬ì˜¤

    ```jsx
    // File name: ExtremeC_examples_chapter8_4_main.c
    // Description: Main scenario which calls the
    // polymorphic functions

    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    // Only public interfaces
    #include "ExtremeC_examples_chapter8_4_animal.h"
    #include "ExtremeC_examples_chapter8_4_cat.h"
    #include "ExtremeC_examples_chapter8_4_duck.h"

    int main(int argc, char** argv) {
      struct animal_t* animal = animal_new();
      struct cat_t* cat = cat_new();
      struct duck_t* duck = duck_new();

      animal_ctor(animal);
      cat_ctor(cat);
      duck_ctor(duck);

      animal_sound(animal);  //ë‹¤ë¥¸ í¬ì¸í„°ë¥¼ ì „ë‹¬í•´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë‹¤í˜•ì  í–‰ìœ„ê°€ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
      animal_sound((struct animal_t*)cat);
      animal_sound((struct animal_t*)duck);

      animal_dtor(animal);
      cat_dtor(cat);
      duck_dtor(duck);

      free(duck);
      free(cat);
      free(animal);
      return 0;
    }
    ```

    - mainí•¨ìˆ˜ëŠ” animal, Cat, Duck í´ë˜ìŠ¤ì˜ ê³µìš©ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
      - mainí•¨ìˆ˜ëŠ” ì´ë“¤ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì— ê´€í•´ì„œëŠ” ì•„ë¬´ê²ƒë„ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ í¬ì¸í„°ë¥¼ ì „ë‹¬í•´ animal_sound í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë‹¤í˜•ì  í–‰ìœ„ê°€ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

    ```jsx
    gcc -c ExtremeC_examples_chapter8_4_animal.c -o animal.o
    gcc -c ExtremeC_examples_chapter8_4_cat.c -o cat.o
    gcc -c ExtremeC_examples_chapter8_4_duck.c -o duck.o
    gcc -c ExtremeC_examples_chapter8_4_main.c -o main.o
    gcc animal.o cat.o duck.o main.o -o ex8_4.out
    ./ex8_4.out

    /********************************************************
    Animal: Beeeep
    Cat: Meow
    Duck: Quacks
    *********************************************************/
    ```
