---
title: "π¦ chap3. λλ‹¤ ν‘ν„μ‹"
author: gengminy
date: 2023-10-08 20:00:00 +09:00
categories:
  [λ¨λ μλ°” μΈ μ•΅μ…, "chap3. λλ‹¤ ν‘ν„μ‹"]
tags: [λ¨λ μλ°” μΈ μ•΅μ…, JAVA, 3μ£Όμ°¨, λ…Έκ²½λ―Ό]
render_with_liquid: false
math: true
---

# 3.1 λλ‹¤λ€ λ¬΄μ—‡μΈκ°€?

λλ‹¤ ν‘ν„μ‹μ€ λ©”μ„λ“λ΅ μ „λ‹¬ν•  μ μλ” μµλ… ν•¨μλ¥Ό λ‹¨μν™”ν• κ²ƒμ΄λ‹¤.

μ΄λ¦„μ€ μ—†μ§€λ§, νλΌλ―Έν„° λ¦¬μ¤νΈ, λ°”λ””, λ°ν™ ν•μ‹, λ°μƒν•  μ μλ” μμ™Έ λ¦¬μ¤νΈλ” κ°€μ§ μ μλ‹¤.

- μµλ… : μ΄λ¦„μ΄ μ—†κΈ° λ•λ¬Έμ— μµλ…μ΄λ‹¤.
- ν•¨μ : νΉμ • ν΄λμ¤μ— μΆ…μ†λμ§€ μ•κΈ° λ•λ¬Έμ— λ©”μ„λ“κ°€ μ•„λ‹ ν•¨μλΌκ³  λ¶€λ¥Έλ‹¤.
- μ „λ‹¬ : λλ‹¤ ν‘ν„μ‹μ„ μΈμλ΅ μ „λ‹¬ν•κ±°λ‚ λ³€μλ΅ μ €μ¥ν•  μ μλ‹¤.
- κ°„κ²°μ„± : μµλ… ν΄λμ¤μ²λΌ λ§μ€ μμ§κµ¬λ ν• μ½”λ“λ¥Ό κµ¬ν„ν•  ν•„μ”κ°€ μ—†λ‹¤.

λλ‹¤λ” μ„Έ λ¶€λ¶„μΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤

```java
(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight());
```

- νλΌλ―Έν„° λ¦¬μ¤νΈ : `(Apple a1, Apple a2)`
- ν™”μ‚΄ν‘ : `->` νλΌλ―Έν„° λ¦¬μ¤νΈμ™€ λ°”λ””λ¥Ό κµ¬λ¶„ν•λ‹¤
- λλ‹¤ λ°”λ”” : `a1.getWeight().compareTo(a2.getWeight());`

λ‹¤μμ€ μλ°” 8μ—μ„ μ§€μ›ν•λ” μ ν¨ν• λλ‹¤ ν‘ν„μ‹ 5κ°€μ§€μ΄λ‹¤.

```java
(String s) -> s.length()

(Apple a) -> a.getWeight() > 150

(int x, int y) -> {
	System.out.println("Result:");
	System.out.println(x + y);
}

() -> 42

(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight());
```

μλ°” μ„¤κ³„μλ” μ΄λ―Έ C#μ΄λ‚ μ¤μΉΌλΌ κ°™μ€ λΉ„μ·ν• κΈ°λ¥μ„ κ°€μ§„ λ‹¤λ¥Έ μ–Έμ–΄μ™€ λΉ„μ·ν• λ¬Έλ²•μ„ μλ°”μ— μ μ©ν•κΈ°λ΅ ν–λ‹¤.

λ‹¤μμ€ ν‘ν„μ‹ μ¤νƒ€μΌ λλ‹¤μ΄λ‹¤.

```java
(parameters) -> expression
```

λ‹¤μμ€ λΈ”λ΅ μ¤νƒ€μΌ λλ‹¤μ΄λ‹¤.

```java
(parameters) -> { statements; }
```

λ‹¤μμ€ λλ‹¤μ μ‚¬μ© μμ‹μ΄λ‹¤.

| λ¶λ¦¬μ–Έ ν‘ν„μ‹ | (List<String> list) β†’ list.isEmpty() |
| --- | --- |
| κ°μ²΄ μƒμ„± | () β†’ new Apple(10) |
| κ°μ²΄μ—μ„ μ†λΉ„ | (Apple a) β†’ { System.out.println(a.getWeight()); } |
| κ°μ²΄μ—μ„ μ„ νƒ/μ¶”μ¶ | (String s) β†’ s.length() |
| λ‘ κ°’μ„ μ΅°ν•© | (int a, int b) β†’ a * b |
| λ‘ κ°μ²΄ λΉ„κµ | (Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()); |

# 3.2 μ–΄λ””μ—, μ–΄λ–»κ² λλ‹¤λ¥Ό μ‚¬μ©ν• κΉ?

### 3.2.1 ν•¨μν• μΈν„°νμ΄μ¤

2μ¥μ—μ„ λ§λ“  Predicate<T> μΈν„°νμ΄μ¤λ΅ ν•„ν„° λ©”μ„λ“λ¥Ό νλΌλ―Έν„°ν™” ν•  μ μμ—λ‹¤.

λ°”λ΅ Predicate<T> κ°€ ν•¨μν• μΈν„°νμ΄μ¤μ΄λ‹¤.

**ν•¨μν• μΈν„°νμ΄μ¤**λ” μ •ν™•ν ν•λ‚μ μ¶”μƒ λ©”μ„λ“λ¥Ό μ§€μ •ν•λ” μΈν„°νμ΄μ¤μ΄λ‹¤.

```java
public interface Comparator<T> {
	int compare(T o1, T o2);
}

public interface Runnable {
	void run();
}

public interface ActionListener extends EventListener {
	void actionPerformed(ActionEvent e);
}

public interface CallableV> {
	V call() throws Exception;
}

public interface PrivilegedAction<T> {
	T run();
}
```

λλ‹¤ ν‘ν„μ‹μΌλ΅ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ κµ¬ν„μ„ μ§μ ‘ μ „λ‹¬ν•  μ μλ‹¤.

μ¦‰ μ „μ²΄ ν‘ν„μ‹μ„ ν•¨μν• μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ μ·¨κΈ‰ν•  μ μλ‹¤.

### 3.2.2 ν•¨μ λ””μ¤ν¬λ¦½ν„°

ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ μ‹κ·Έλ‹μ²λ” λλ‹¤ ν‘ν„μ‹μ μ‹κ·Έλ‹μ²λ¥Ό κ°€λ¦¬ν‚¨λ‹¤.

λλ‹¤ ν‘ν„μ‹μ μ‹κ·Έλ‹μ²λ¥Ό μ„μ ν•λ” λ©”μ„λ“λ¥Ό **ν•¨μ λ””μ¤ν¬λ¦½ν„°**λΌκ³  λ¶€λ¥Έλ‹¤.

`@FunctionalInterface` λ” λ¬΄μ—‡μΈκ°€?

μ΄λ” ν•¨μν• μΈν„°νμ΄μ¤μ„μ„ κ°€λ¦¬ν‚¤λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤.

μ΄λ¥Ό μ΄μ©ν•μ—¬ μΈν„°νμ΄μ¤λ¥Ό μ„ μ–Έν–μ§€λ§ μ‹¤μ λ΅ ν•¨μν• μΈν„°νμ΄μ¤κ°€ μ•„λ‹λΌλ©΄ μ»΄νμΌ μ—λ¬λ¥Ό λ°μƒμ‹ν‚¨λ‹¤.

μ΄ μ–΄λ…Έν…μ΄μ…μ΄ μλ” μΈν„°νμ΄μ¤λ” μ¶”μƒ λ©”μ„λ“κ°€ λ‹¨ ν•κ° μ—¬μ•Ό ν•λ‹¤.

# 3.3 λλ‹¤ ν™μ© : μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄

DB νμΌ μ²λ¦¬μ™€ κ°™μ€ μμ› μ²λ¦¬λ” μν™ ν¨ν„΄μΌλ΅ μμ›μ„ μ—΄κ³  μ²λ¦¬ν• λ‹¤μ μμ›μ„ λ‹«λ” μμ„λ΅ μ΄λ£¨μ–΄μ§„λ‹¤.

μ¦‰ μ‹¤μ  μμ›μ„ μ²λ¦¬ν•λ” μ½”λ“λ¥Ό μ„¤μ •κ³Ό μ •λ¦¬ λ‘ κ³Όμ •μ΄ λ‘λ¬μ‹Έλ” ν•νƒμ΄λ‹¤.

μ΄λ¥Ό μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄(Execute Around Pattern) μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

<img src="https://github.com/L1LDB/L1LDB.github.io/blob/main/_posts/modern-java-in-action/chap3.-λλ‹¤-ν‘ν„μ‹/2023-10-01-λ…Έκ²½λ―Ό/1.png" />

```java
public String processFile() throws IOException {
	try (BufferedReader br = new BufferedReader(new FileReader("data.txt"))) {
		return br.readline();
	}
}
```

### 3.3.1 1λ‹¨κ³„ : λ™μ‘ νλΌλ―Έν„°ν™”λ¥Ό κΈ°μ–µν•λΌ

ν„μ¬ μ½”λ“λ” ν• λ²μ— ν• μ¤„λ§ μ½μ„ μ μλ‹¤.

κΈ°μ΅΄μ μ„¤μ •, μ •λ¦¬ κ³Όμ •μ€ μ¬μ‚¬μ©ν•κ³  λ‚΄λ¶€ λ©”μ„λ“λ§ λ‹¤λ¥Έ λ™μ‘μ„ μν–‰ν•λ„λ΅ ν•λ ¤λ©΄?

processFile μ λ™μ‘μ„ νλΌλ―Έν„°ν™”ν•λ©΄ λλ‹¤.

λλ‹¤λ¥Ό μ΄μ©ν•λ©΄ λ©”μ„λ“μ— λ™μ‘μ„ μ „λ‹¬ν•  μ μλ‹¤.

λ§μ•½ ν• λ²μ— λ‘ ν–‰μ„ μ½κ² λ§λ“λ ¤λ©΄?

```java
String result = processFile((BufferedReader br) -> br.readLine() + br.readLine());
```

### 3.3.2 2λ‹¨κ³„ : ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄μ„ λ™μ‘ μ „λ‹¬

ν•¨μν• μΈν„°νμ΄μ¤ μλ¦¬μ— λλ‹¤λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

```java
@FunctionalInterface
public interface BufferedReaderProcessor {
	String process(BufferedReader b) throws IOException;
}
```

```java
public String processFile(BufferedReaderProcessor p) throws IOException {

}
```

### 3.3.3 3λ‹¨κ³„ : λ™μ‘ μ‹¤ν–‰

λλ‹¤ ν‘ν„μ‹μΌλ΅ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ κµ¬ν„μ„ μ§μ ‘ μ „λ‹¬ν•  μ μμΌλ©°
μ „λ‹¬λ μ½”λ“λ” ν•¨μν• μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ μ „λ‹¬λ μ½”λ“μ™€ κ°™μ€ λ°©μ‹μΌλ΅ μ²λ¦¬ν•λ‹¤.

```java
public String processFile(BufferedReaderProcessor p) throws IOException {
	try (BufferedReader br = new BufferedReader(new FileReader("data.txt"))) {
		return p.process(br);
	}
}
```

### 3.3.4 4λ‹¨κ³„ : λλ‹¤ μ „λ‹¬

λ‹¤μμ€ ν• ν–‰μ„ μ²λ¦¬ν•λ” μ½”λ“μ΄λ‹¤.

```java
String oneLine = processFile((BufferedReader br) -> br.readLine());
```

λ‹¤μμ€ λ‘ ν–‰μ„ μ²λ¦¬ν•λ” μ½”λ“μ΄λ‹¤.

```java
String oneLine = processFile((BufferedReader br) -> br.readLine() + br.readLine());
```

# 3.4 ν•¨μν• μΈν„°νμ΄μ¤ μ‚¬μ©

ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ μ‹κ·Έλ‹μ²λ¥Ό **ν•¨μ λ””μ¤ν¬λ¦½ν„°**λΌκ³  ν•λ‹¤.

λ‹¤μ–‘ν• λλ‹¤ ν‘ν„μ‹μ„ μ‚¬μ©ν•λ ¤λ©΄ κ³µν†µμ ν•¨μ λ””μ¤ν¬λ¦½ν„°λ¥Ό κΈ°μ ν•λ” ν•¨μν• μΈν„°νμ΄μ¤ μ§‘ν•©μ΄ ν•„μ”ν•λ‹¤.

μ΄λ―Έ μλ°” API λ” Comparable, Runnable, Callable λ“±μ λ‹¤μ–‘ν• ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό ν¬ν•¨ν•λ‹¤.

μλ°” 8μ—μ„λ” `java.util.function` ν¨ν‚¤μ§€μ— μ—¬λ¬ μƒλ΅μ΄ ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ‹¤.

### 3.4.1 Predicate

`java.util.function.Predicate<T>` μΈν„°νμ΄μ¤λ” test λΌλ” μ¶”μƒ λ©”μ„λ“λ¥Ό μ •μν•κ³ 

T ν•μ‹μ κ°μ²΄λ¥Ό μΈμλ΅ λ°›μ•„ boolean μ„ λ°ν™ν•λ‹¤.

```java
@FunctionalInterface
public interface Predicate<T> {
	boolean test(T t);
}
```

### 3.4.2 Consumer

`java.util.function.Predicate<T>` μΈν„°νμ΄μ¤λ” T κ°μ²΄λ¥Ό λ°›μ•„μ„ void λ¥Ό λ°ν™ν•λ” accept λΌλ” μ¶”μƒ λ©”μ„λ“λ¥Ό μ •μν•λ‹¤.

```java
@FunctionalInterface
public interface Consumer<T> {
	void accept(T t);
}
```

### 3.4.3 Function

`java.util.function.Function<T, R>` μΈν„°νμ΄μ¤λ” T κ°μ²΄λ¥Ό λ°›μ•„μ„ R κ°μ²΄λ¥Ό λ¥Ό λ°ν™ν•λ” apply λΌλ” μ¶”μƒ λ©”μ„λ“λ¥Ό μ •μν•λ‹¤.

μ…λ ¥μ„ μ¶λ ¥μΌλ΅ λ§¤ν•‘ν•λ” λλ‹¤λ¥Ό μ •μν•  λ• ν™μ©ν•  μ μλ‹¤.

```java
@FunctionalInterface
public interface Function<T, R> {
	R apply(T t);
}
```

μ λ„¤λ¦­ νλΌλ―Έν„°λ” μ°Έμ΅°ν•(Reference Type) λ§ μ‚¬μ©ν•  μ μλ‹¤.

μλ°”μ—μ„λ” κΈ°λ³Έν•κ³Ό μ°Έμ΅°ν•μ„ λ³€ν™ν•λ” **λ°•μ‹±**, **μ–Έλ°•μ‹±**μ„ μ§€μ›ν•λ‹¤.

μ΄ λ™μ‘μ΄ μλ™μΌλ΅ μ΄λ£¨μ–΄μ§€λ” **μ¤ν†  λ°•μ‹±**μ΄λΌλ” κΈ°λ¥λ„ μ§€μ›ν•λ‹¤.

ν•μ§€λ§ μ΄λ° λ³€ν™ κ³Όμ •μ€ λΉ„μ©μ΄ μ†λ¨λλ‹¤.

λ°•μ‹±ν• κ°’μ€ κΈ°λ³Έν•μ„ κ°μ‹Έλ” Wrapper μ΄κ³  ν™μ— μ €μ¥λλ‹¤.

μλ°” 8μ—μ„λ” κΈ°λ³Έν•μ„ μ…μ¶λ ¥μΌλ΅ μ‚¬μ©ν•λ” μƒν™©μ—μ„ μ¤ν† λ°•μ‹± λ™μ‘μ„ ν”Όν•  μ μλ„λ΅ νΉλ³„ν• ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ‹¤.

λ‹¤μ μμ μ—μ„ `IntPredicate` λ” 1000 μ΄λΌλ” κ°’μ„ λ°•μ‹±ν•μ§€ μ•μ§€λ§, Predicate<Integer> λ” 1000μ΄λΌλ” κ°’μ„ Integer κ°μ²΄λ΅ λ°•μ‹±ν•λ‹¤.

```java
public interface IntPredicate {
	boolean test(int t);
}

IntPredicate evenNubmers = (int i) -> i % 2 == 0;
evenNumbers.test(1000);

Predicate<Integer> oddNumbers = (Integer i) -> i % 2 != 0;
oddNumbers.test(1000);
```

ν•¨μν• μΈν„°νμ΄μ¤λ” ν™•μΈλ μμ™Έ (Checked Exception)μ„ λμ§€λ” λ™μ‘μ„ ν—μ©ν•μ§€ μ•λ”λ‹¤.

μ¦‰ μμ™Έλ¥Ό λμ§€λ” λλ‹¤ ν‘ν„μ‹μ„ λ§λ“¤λ ¤λ©΄ **ν™•μΈλ μμ™Έλ¥Ό μ„ μ–Έν•λ” ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ μ •μ**ν•κ±°λ‚ **λλ‹¤λ¥Ό `try/catch` λΈ”λ΅μΌλ΅ κ°μ‹Έμ•Ό ν•λ‹¤.**

μλ¥Ό λ“¤μ–΄ Function<T, R> ν•μ‹μ ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό κΈ°λ€ν•λ” APIλ¥Ό μ‚¬μ©ν•κ³  μμ–΄ μ§μ ‘ ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κΈ° μ–΄λ µλ‹¤λ©΄,

```java
Function<BufferedReader, String> f = (BufferedReader b) -> {
	try {
		return b.readLine();
	} catch (IOException e) {
		throw new RuntimeException(e);
	}
}
```

λΉ„κ²€μ‚¬ μμ™Έλ΅ μ „ν™ν•μ—¬μ•Ό ν•λ‹¤.

# 3.5 ν•μ‹ κ²€μ‚¬, ν•μ‹ μ¶”λ΅ , μ μ•½

λλ‹¤ ν‘ν„μ‹μ„ λ” μ λ€λ΅ μ΄ν•΄ν•λ ¤λ©΄ λλ‹¤μ μ‹¤μ  ν•μ‹μ„ νμ•…ν•΄μ•Ό ν•λ‹¤.

### 3.5.1 ν•μ‹ κ²€μ‚¬

λλ‹¤κ°€ μ‚¬μ©λλ” context λ¥Ό μ΄μ©ν•΄μ„ λλ‹¤μ type μ„ μ¶”λ΅ ν•  μ μλ‹¤.

μ–΄λ–¤ context μ—μ„ κΈ°λ€λλ” λλ‹¤ ν‘ν„μ‹μ ν•μ‹μ„ λ€μƒ ν•μ‹(target type)μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

<img src="https://github.com/L1LDB/L1LDB.github.io/blob/main/_posts/modern-java-in-action/chap3.-λλ‹¤-ν‘ν„μ‹/2023-10-01-λ…Έκ²½λ―Ό/2.png" />

### 3.5.2 κ°™μ€ λλ‹¤, λ‹¤λ¥Έ ν•¨μν• μΈν„°νμ΄μ¤

λ€μƒ ν•μ‹μ΄λΌλ” νΉμ§•μΌλ΅ κ°™μ€ λλ‹¤ ν‘ν„μ‹μ΄λΌλ„ νΈν™λλ” μ¶”μƒ λ©”μ„λ“λ¥Ό κ°€μ§„ λ‹¤λ¥Έ ν•¨μν• μΈν„°νμ΄μ¤λ΅ μ‚¬μ©λ  μ μλ‹¤.

λ‹¤μ λ‘ ν• λ‹Ήλ¬Έμ€ λ¨λ‘ μ ν¨ν•λ‹¤.

```java
Callable<Integer> c = () -> 42;
PrivilegedAction<Integer> p = () -> 42;
```

### 3.5.3 ν•μ‹ μ¶”λ΅ 

μλ°” μ»΄νμΌλ¬λ” λ€μƒ ν•μ‹μ„ μ΄μ©ν•΄μ„ ν•¨μ λ””μ¤ν¬λ¦½ν„°λ¥Ό μ• μ μκΈ° λ•λ¬Έμ— μ»΄νμΌλ¬κ°€ λλ‹¤μ μ‹κ·Έλ‹μ²λ„ μ¶”λ΅ ν•  μ μλ‹¤.

μ»΄νμΌλ¬κ°€ λλ‹¤ ν‘ν„μ‹μ νλΌλ―Έν„° νƒ€μ…μ— μ ‘κ·Όν•  μ μκΈ° λ•λ¬Έμ— λλ‹¤ λ¬Έλ²•μ—μ„λ” μ΄λ¥Ό μƒλµν•  μ μλ‹¤.

```java
List<Apple> greenApples = filter(inventory, apple -> GREEN.equals(apple.getColor()));
```

```java
// ν•μ‹ μ¶”λ΅  x
Comparator<Apple> c = 
	(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight());

// ν•μ‹ μ¶”λ΅ 
Comparator<Apple> c = 
	(a1, a2) -> a1.getWeight().compareTo(a2.getWeight());
```

### 3.5.4 μ§€μ—­ λ³€μ μ‚¬μ©

λλ‹¤ ν‘ν„μ‹μ—μ„λ” μµλ… ν•¨μμ²λΌ **μμ  λ³€μ**λ¥Ό ν™μ©ν•  μ μκ³  μ΄λ¥Ό **λλ‹¤ μΊ΅μ²λ§**μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

```java
int portNumber = 1337;
Runnable r = () -> System.out.println(portNumber);
```

μ΄λ¥Ό μ„ν•΄μ„λ” μ§€μ—­ λ³€μλ” λ…μ‹μ μΌλ΅ final λ΅ μ„ μ–Έλκ±°λ‚ μ¬ν• λ‹Ήμ΄ μ΄λ£¨μ–΄μ§€λ©΄ μ•λλ‹¤.

λ‹¤μμ€ μ»΄νμΌν•  μ μ—†λ‹¤.

```java
int portNumber = 1337;
Runnable r = () -> System.out.println(portNumber);
portNumber = 31337;
```

μΈμ¤ν„΄μ¤ λ³€μλ” ν™μ— μ €μ¥λλ” λ°λ©΄ μ§€μ—­ λ³€μλ” μ¤νƒμ— μ„μΉν•λ‹¤.

κ·Έλ ‡κΈ° λ•λ¬Έμ— μλ°” κµ¬ν„μ—μ„λ” μ›λ λ³€μμ— μ ‘κ·Όμ„ ν—μ©ν•λ”κ² μ•„λ‹λΌ

μμ  μ§€μ—­ λ³€μμ λ³µμ‚¬λ³Έμ„ μ κ³µν•λ‹¤.

λ”°λΌμ„ λ³µμ‚¬λ³Έμ κ°’μ΄ λ°”λ€μ§€ μ•μ•„μ•Ό ν•λ‹¤.

# 3.6 λ©”μ„λ“ μ°Έμ΅°

λ©”μ„λ“ μ°Έμ΅°λ¥Ό μ΄μ©ν•λ©΄ κΈ°μ΅΄μ λ©”μ„λ“ μ •μλ¥Ό μ¬ν™μ©ν•΄μ„ λλ‹¤μ²λΌ μ „λ‹¬ν•  μ μλ‹¤.

λ‹¤μμ€ κΈ°μ΅΄ μ½”λ“λ‹¤.

```java
inventory.sort((Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()));
```

λ‹¤μμ€ λ©”μ„λ“ μ°Έμ΅°μ™€ `java.util.Comparator.comparing` μ„ ν™μ©ν• μ½”λ“λ‹¤.

```java
inventory.sort(comparing(Apple::getWeight));
```

### 3.6.1 μ”μ•½

λ©”μ„λ“ μ°Έμ΅°λ” νΉμ • λ©”μ„λ“λ§μ„ νΈμ¶ν•λ” λλ‹¤μ μ¶•μ•½ν•μ΄λΌ ν•  μ μλ‹¤.

λ©”μ„λ“ μ°Έμ΅°λ¥Ό μ΄μ©ν•λ©΄ κΈ°μ΅΄ λ©”μ„λ“ κµ¬ν„μΌλ΅ λλ‹¤ ν‘ν„μ‹μ„ λ§λ“¤ μ μκ³ , λ…μ‹μ μΌλ΅ λ©”μ„λ“λ…μ„ μ°Έμ΅°ν•¨μΌλ΅μ¨ κ°€λ…μ„±μ„ λ†’μΌ μ μλ‹¤.

λ©”μ„λ“ μ°Έμ΅°λ” μ„Έ κ°€μ§€ μ ν•μΌλ΅ κµ¬λ¶„ν•  μ μλ‹¤.

1. μ •μ  λ©”μ„λ“ μ°Έμ΅°

Integer μ parseInt λ” Integer::parseInt λ΅ ν‘ν„ν•  μ μλ‹¤.

1. λ‹¤μ–‘ν• ν•μ‹μ μΈμ¤ν„΄μ¤ λ©”μ„λ“ μ°Έμ΅°

String μ length λ” String::length λ΅ ν‘ν„ν•  μ μλ‹¤.

1. κΈ°μ΅΄ κ°μ²΄μ μΈμ¤ν„΄μ¤ λ©”μ„λ“ μ°Έμ΅°

Transaction κ°μ²΄λ¥Ό ν• λ‹Ήλ°›μ€ expensiveTransaction μ§€μ—­ λ³€μ μΈμ¤ν„΄μ¤μ—μ„ Transaction κ°μ²΄μ getValue λ©”μ„λ“λ¥Ό νΈμ¶ν•λ©΄ expensiveTransaction::getValue λ΅ ν‘ν„ν•  μ μλ‹¤.

<img src="https://github.com/L1LDB/L1LDB.github.io/blob/main/_posts/modern-java-in-action/chap3.-λλ‹¤-ν‘ν„μ‹/2023-10-01-λ…Έκ²½λ―Ό/3.png" />

### 3.6.2 μƒμ„±μ μ°Έμ΅°

ClassName::new μ²λΌ ν΄λμ¤λ…κ³Ό new ν‚¤μ›λ“λ¥Ό μ΄μ©ν•΄μ„ κΈ°μ΅΄ μƒμ„±μμ μ°Έμ΅°λ¥Ό λ§λ“¤ μ μλ‹¤.

μΈμκ°€ μ—†λ” μƒμ„±μλ” Supplier λ¥Ό μ΄μ©ν•  μ μλ‹¤.

```java
Supplier<Apple> c1 = Apple::new;
Apple a1 = c1.get();
```

`Apple(Integer weight)` λΌλ” μ‹κ·Έλ‹μ²λ¥Ό κ°–λ” μƒμ„±μλ” Function μ„ μ΄μ©ν•  μ μλ‹¤.

```java
Fuction<Integer, Apple> c1 = Apple::new;
Apple a2 = c2.apply(110);
```

`Apple(String color, Integer weight` μ²λΌ λ‘ μΈμλ¥Ό κ°–λ” μƒμ„±μλ” BiFunction μ„ μ΄μ©ν•λ‹¤.

```java
Fuction<Color, Integer, Apple> c1 = Apple::new;
Apple a2 = c2.apply(GREEN, 110);
```

μ΄λ¥Ό μ΄μ©ν•μ—¬ Map μΌλ΅ μƒμ„±μμ™€ λ¬Έμμ—΄κ°’μ„ κ΄€λ ¨μ‹ν‚¤κ³ , String, Integer κ°€ μ£Όμ–΄μ΅μ„ λ• λ‹¤μ–‘ν• λ¬΄κ²λ¥Ό κ°–λ” μ—¬λ¬ μΆ…λ¥μ κ³ΌμΌμ„ λ§λ“λ” λ©”μ„λ“λ¥Ό μ •μν•  μ μλ‹¤.

```java
static Map<Sring, Function<Integer, Fruit>> map = new HashMap<>();
static {
	map.put("apple", Apple::new);
	map.put("orange", Orange::new);
}

public static Fruit giveMeFruit(String fruit, Integer weight) {
	return map.get(fruit.toLowerCase()) // Function λ°ν™
						.apply(weight);
}
```

# 3.7 λλ‹¤, λ©”μ„λ“ μ°Έμ΅° ν™μ©ν•κΈ°

### 3.7.1 1λ‹¨κ³„ : μ½”λ“ μ „λ‹¬

```java
void sort(Comparator<? super E> c)
```

μ΄ μ½”λ“λ” Comparator κ°μ²΄λ¥Ό μΈμλ΅ λ°›μ•„ λ‘ μ‚¬κ³Όλ¥Ό λΉ„κµν•λ‹¤.

κ°μ²΄ μ•μ— λ™μ‘μ„ ν¬ν•¨μ‹ν‚¤λ” λ°©μ‹μΌλ΅ μ΄μ  sort μ λ™μ‘μ€ νλΌλ―Έν„°ν™” λμ—λ‹¤κ³  ν•  μ μλ‹¤.

```java
public class AppleComparator implements Comparator<Apple> {
	public int compare(Apple a1, Apple a2) {
		return a1.getWeight().compareTo(a2.getWeight());
	}
}
inventory.sort(new AppleComparator());
```

### 3.7.2 2λ‹¨κ³„ : μµλ… ν΄λμ¤ μ‚¬μ©

ν• λ²λ§ μ‚¬μ©ν•  Comparator λ¥Ό κµ¬ν„ν•λ” κ²ƒ λ³΄λ‹¤λ” μµλ… ν΄λμ¤λ¥Ό μ΄μ©ν•μ.

```java
inventory.sort(new Comparator<Apple>() {
	public int compare(Apple a1, Apple a2) {
		return a1.getWeight().compareTo(a2.getWeight());
	}
}
```

### 3.7.3 3λ‹¨κ³„ : λλ‹¤ ν‘ν„μ‹ μ‚¬μ©

μλ°” 8μ—μ„λ” λλ‹¤ ν‘ν„μ‹μ΄λΌλ” κ²½λ‰ν™”λ λ¬Έλ²•μ„ μ‚¬μ©ν•΄ μ½”λ“λ¥Ό μ „λ‹¬ν•  μ μλ‹¤.

ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό κΈ°λ€ν•λ” κ³³ μ–΄λ””μ—μ„λ‚ λλ‹¤ ν‘ν„μ‹μ„ μ‚¬μ©ν•  μ μλ‹¤.

```java
inventory.sort((Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()));
```

μλ°” μ»΄νμΌλ¬λ” λλ‹¤ ν‘ν„μ‹μ΄ μ‚¬μ©λ context λ¥Ό μ‚¬μ©ν•΄μ„ λλ‹¤μ νλΌλ―Έν„° type μ„ μ¶”λ΅ ν•λ‹¤.

```java
inventory.sort((a1, a2) -> a1.getWeight().compareTo(a2.getWeight()));
```

Comparator λ” Comparable ν‚¤λ¥Ό μ¶”μ¶ν•΄μ„ Comparator κ°μ²΄λ΅ λ§λ“λ” Function<> μ„ μΈμλ΅ λ°›λ” μ •μ  λ©”μ„λ“ comparing μ„ ν¬ν•¨ν•λ‹¤. μ΄λ¥Ό μ΄μ©ν•΄ κ°€λ…μ„±μ„ ν–¥μƒν•μ

```java
import static java.util.Comparator.comparing;

inventory.sort(comparing(apple -> apple.getWeight()));
```

### 3.7.4 4λ‹¨κ³„ : λ©”μ„λ“ μ°Έμ΅° μ‚¬μ©

λ©”μ„λ“ μ°Έμ΅°λ¥Ό μ΄μ©ν•λ©΄ λλ‹¤ ν‘ν„μ‹μ μΈμλ¥Ό λ” κΉ”λ”ν•κ² μ „λ‹¬ν•  μ μλ‹¤.

```java
inventory.sort(comparing(Apple::getWeight));
```

# 3.8 λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•  μ μλ” μ μ©ν• λ©”μ„λ“

μλ°” 8 APIμ λ‡λ‡ ν•¨μν• μΈν„°νμ΄μ¤λ” λ‹¤μ–‘ν• μ ν‹Έλ¦¬ν‹° λ©”μ„λ“λ¥Ό ν¬ν•¨ν•λ‹¤.

κ°„λ‹¨ν• μ—¬λ¬ κ°μ λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•μ—¬ λ³µμ΅ν• λλ‹¤ ν‘ν„μ‹μ„ λ§λ“¤ μ μλ‹¤.

ν•¨μν• μΈν„°νμ΄μ¤μ—μ„ μ¶”κ°€λ΅ λ©”μ„λ“λ¥Ό μ κ³µν•λ‹¤λ” κ²ƒ μμ²΄κ°€ ν•¨μν• μΈν„°νμ΄μ¤μ μ •μμ— μ–΄κΈ‹λ‚λ” κ²ƒμΈλ° μ–΄λ–»κ² κ°€λ¥ν• κΉ?

λ°”λ΅ **λ””ν΄νΈ λ©”μ„λ“**μ΄λ‹¤.

### 3.8.1 Comparator μ΅°ν•©

```java
Comparator<Apple> c = Comparator.comparing(Apple::getWeight);
```

- μ—­μ •λ ¬

μ‚¬κ³Όμ λ¬΄κ²λ¥Ό λ‚΄λ¦Όμ°¨μμΌλ΅ μ •λ ¬ν•κ³  μ‹¶λ‹¤λ©΄ `reversed` λ¥Ό μ‚¬μ©ν•λ‹¤

```java
inventory.sort(comparing(Apple::getWeight).reversed());
```

- μ—°κ²°

λΉ„κµ κ²°κ³Όλ¥Ό λ” λ‹¤λ“¬μ„ μ μλ” λ‘ λ²μ§Έ Comparatorλ¥Ό λ§λ“¤ μ μλ‹¤.

`thenComparing` μ€ μ²« λ²μ§Έ λΉ„κµμμ—μ„ λ‘ κ°μ²΄κ°€ κ°™λ‹¤κ³  νλ‹¨λλ©΄ λ‘ λ²μ§Έ λΉ„κµμμ— κ°μ²΄λ¥Ό μ „λ‹¬ν•λ‹¤.

```java
inventory.sort(comparing(Apple::getWeight)
				.reversed()
				.thenComparing(Apple::getCountry));
```

### 3.8.2 Predicate μ΅°ν•©

- λ°μ „

νΉμ • Predicate μ κ²°κ³Όλ¥Ό λ°μ „μ‹ν‚¬ λ• `negate` λ¥Ό μ‚¬μ©ν•λ‹¤.

```java
Predicate<Apple> notRedApple = redApple.negate();
```

- and

λ‘ λλ‹¤λ¥Ό μ΅°ν•©ν•  λ• `and` λ¥Ό μ‚¬μ©ν•λ‹¤.

```java
Predicate<Apple> redAndHeavyApple = redApple.and(apple -> apple.getWeight() > 150);
```

- or

λ‘ λλ‹¤λ¥Ό μ΅°ν•©ν•  λ• `or` μ„ μ‚¬μ©ν•λ‹¤.

```java
Predicate<Apple> redAndHeavyAppleOrGreen = 
		redApple.and(apple -> apple.getWeight() > 150);
						.or(apple -> GREEN.equals(a.getColor()));
```

### 3.8.3 Function μ΅°ν•©

- andThen

μ£Όμ–΄μ§„ ν•¨μλ¥Ό λ¨Όμ € μ μ©ν• κ²°κ³Όλ¥Ό λ‹¤λ¥Έ ν•¨μμ μ…λ ¥μΌλ΅ μ „λ‹¬ν•λ‹¤.

```java
Function<Integer, Integer> f = x -> x + 1;
Function<Integer, Integer> g = x -> x * 2;
Function<Integer, Integer> h = f.andThen(g); // μν•™μ μΌλ΅ g(f(x))
int result = h.apply(1); // 4λ¥Ό λ°ν™
```

- compose

μΈμλ΅ μ£Όμ–΄μ§„ ν•¨μλ¥Ό λ¨Όμ € μ‹¤ν–‰ν•κ³  μ™Έλ¶€ ν•¨μμ— κ²°κ³Όλ¥Ό μ „λ‹¬ν•λ‹¤.

```java
Function<Integer, Integer> f = x -> x + 1;
Function<Integer, Integer> g = x -> x * 2;
Function<Integer, Integer> h = f.compose(g); // μν•™μ μΌλ΅ f(g(x))
int result = h.apply(1); // 3μ„ λ°ν™
```