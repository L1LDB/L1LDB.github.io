---
title: "ğŸ¦Š chap4. ìŠ¤íŠ¸ë¦¼ ì†Œê°œ"
author: gengminy
date: 2023-10-15 22:00:00 +09:00
categories:
  [ëª¨ë˜ ìë°” ì¸ ì•¡ì…˜, "chap4. ìŠ¤íŠ¸ë¦¼ ì†Œê°œ"]
tags: [ëª¨ë˜ ìë°” ì¸ ì•¡ì…˜, JAVA, 3ì£¼ì°¨, ë…¸ê²½ë¯¼]
render_with_liquid: false
math: true
---

ì»¬ë ‰ì…˜ì€ ë°ì´í„°ë¥¼ ê·¸ë£¹í™”í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë©° ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë˜ë° ì‘ì—…ì— ì‚¬ìš©ëœë‹¤.

ê·¸ëŸ¬ë‚˜ ì™„ë²½í•œ ì»¬ë ‰ì…˜ ê´€ë ¨ ì—°ì‚°ì„ ì§€ì›í•˜ë ¤ë©´ ë©€ì—ˆë‹¤.

SQL ì§ˆì˜ì—ì„œëŠ” ì„ ì–¸í˜•ìœ¼ë¡œ ì—°ì‚°ì„ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë©° êµ¬í˜„ì€ ìë™ìœ¼ë¡œ ì œê³µëœë‹¤.

```java
SELECT name FROM dishes WHERE calorie < 400
```

ì»¬ë ‰ì…˜ì— ìš”ì†Œê°€ ë§ë‹¤ë©´? ë³‘ë ¬ë¡œ ì»¬ë ‰ì…˜ì„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

ê·¸ëŸ¬ë‚˜ ë‹¨ìˆœ ë°˜ë³µ ì²˜ë¦¬ ì½”ë“œì— ë¹„í•´ ë³‘ë ¬ ì²˜ë¦¬ ì½”ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë³µì¡í•˜ê³  ì–´ë ¤ìš°ë©° ë””ë²„ê¹…ì´ í˜ë“¤ë‹¤.

# 4.1 ìŠ¤íŠ¸ë¦¼ì´ë€ ë¬´ì—‡ì¸ê°€?

ìŠ¤íŠ¸ë¦¼ì€ ìë°” 8 API ì— ì¶”ê°€ëœ ê¸°ëŠ¥ì´ë‹¤.

ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ë©´ ì„ ì–¸í˜•ìœ¼ë¡œ ì»¬ë ‰ì…˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

ë©€í‹°ìŠ¤ë ˆë“œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë°ì´í„°ë¥¼ íˆ¬ëª…í•˜ê²Œ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```java
List<Dish> lowCaloricDishes = new ArrayList<>();
for(Dish dish: menu) {
	if(dish.getCalories() < 400) {
		lowCaloricDishes.add(dish);
	}
}
Collections.sort(lowCaloricDishes, new Comparator<Dish>() {
	public int compare(Dish dish1, Dish dish2) {
		return Integer.compare(dish1.getCalories(), dish2.getCalories());
	}
});
List<String> lowCaloricDishesName = new ArrayList<>();
for(Dish dish: lowCaloricDishes) {
	lowCaloricDishesName.add(dish.getName());
}
```

ì´ ì½”ë“œì—ì„œëŠ” lowCaloricDishes ë¼ëŠ” ì»¨í…Œì´ë„ˆ ì—­í• ë§Œ í•˜ëŠ” ì¤‘ê°„ ë³€ìˆ˜ì¸ `ê°€ë¹„ì§€ ë³€ìˆ˜`ë¥¼ ì‚¬ìš©í–ˆë‹¤.

ìë°” 8ì—ì„œëŠ” ì´ëŸ° ì„¸ë¶€ êµ¬í˜„ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬(ìŠ¤íŠ¸ë¦¼) ë‚´ì—ì„œ ëª¨ë‘ ì²˜ë¦¬í•œë‹¤.

```java
List<String> lowCaloricDishesName = 
			menu.stream()
					.filter(d -> d.getCalories() < 400)
					.sorted(comapring(Dish::getCalories))
					.map(Dish::getName)
					.collect(toList());
```

ë§Œì•½ `stream()` ì„ `parallelStream()` ìœ¼ë¡œ ë°”ê¾¸ë©´ ë³‘ë ¬ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.

```java
List<String> lowCaloricDishesName = 
			menu.parallelStream()
					.filter(d -> d.getCalories() < 400)
					.sorted(comapring(Dish::getCalories))
					.map(Dish::getName)
					.collect(toList());
```

ìŠ¤íŠ¸ë¦¼ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ì ìœ¼ë¡œ ë‹¤ì–‘í•œ ì´ë“ì„ ì¤€ë‹¤.

- ì„ ì–¸í˜•ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
    - ì–´ë–»ê²Œ ë™ì‘ì„ êµ¬í˜„í• ì§€ ì§€ì •í•  í•„ìš” ì—†ì´ ë™ì‘ì˜ ìˆ˜í–‰ì„ ì§€ì •í•œë‹¤.
    - ì„ ì–¸í˜• ì½”ë“œì™€ ë™ì‘ íŒŒë¼ë¯¸í„°í™”, ëŒë‹¤ë¥¼ ì´ìš©í•˜ì—¬ ì‰½ê²Œ ì½”ë“œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ê³  ìš”êµ¬ì‚¬í•­ì— ì‰½ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.
- ë³µì¡í•œ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
    - ì—¬ëŸ¬ ì—°ì‚°ì„ ì—°ê²°í•´ë„ ê°€ë…ì„±ê³¼ ëª…í™•ì„±ì´ ìœ ì§€ëœë‹¤.

 filter, sorted, map, colllect ì™€ ê°™ì€ ì—°ì‚°ì€ ê³ ìˆ˜ì¤€ ë¹Œë”© ë¸”ë¡ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ íŠ¹ì • ìŠ¤ë ˆë”© ëª¨ë¸ì— ì œí•œë˜ì§€ ì•Šê³  ììœ ë¡­ê²Œ ì–´ë–¤ ìƒí™©ì—ì„œë“  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ê²°ê³¼ì ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬ì—ì„œë„ ìŠ¤ë ˆë“œì™€ ë½ì„ ê±±ì •í•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.

# 4.2 ìŠ¤íŠ¸ë¦¼ ì‹œì‘í•˜ê¸°

ìë°” 8 ì»¬ë ‰ì…˜ì—ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•˜ëŠ” `stream` ë©”ì„œë“œê°€ ì¶”ê°€ëë‹¤.

ìŠ¤íŠ¸ë¦¼ì´ë€ `ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°ì„ ì§€ì›í•˜ë„ë¡ ì†ŒìŠ¤ì—ì„œ ì¶”ì¶œëœ ì—°ì†ëœ ìš”ì†Œ` ë¼ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤.

- ì—°ì†ëœ ìš”ì†Œ
    - ì»¬ë ‰ì…˜ì²˜ëŸ¼ íŠ¹ì • ìš”ì†Œ í˜•ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì—°ì†ëœ ê°’ ì§‘í•©ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤.
    - ì»¬ë ‰ì…˜ì€ ìë£Œêµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— ì‹œê³µê°„ ë³µì¡ì„±ê³¼ ê´€ë ¨ëœ ìš”ì†Œ ì €ì¥ ë° ì ‘ê·¼ ì—°ì‚°ì´ ì£¼ê°€ ëœë‹¤.
    - ë°˜ë©´ ìŠ¤íŠ¸ë¦¼ì€ í‘œí˜„ ê³„ì‚°ì‹ì´ ì£¼ë¥¼ ì´ë£¬ë‹¤.
    - ì»¬ë ‰ì…˜ì˜ ì£¼ì œëŠ” ë°ì´í„°, ìŠ¤íŠ¸ë¦¼ì˜ ì£¼ì œëŠ” ê³„ì‚°ì´ë‹¤.
- ì†ŒìŠ¤
    - ìŠ¤íŠ¸ë¦¼ì€ ì»¬ë ‰ì…˜, ë°°ì—´, I/O ìì› ë“±ì˜ ë°ì´í„° ì œê³µ ì†ŒìŠ¤ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì†Œë¹„í•œë‹¤.
- ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°
    - í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì§€ì›í•˜ëŠ” ì—°ì‚°ê³¼ DBì™€ ë¹„ìŠ·í•œ ì—°ì‚°ì„ ì§€ì›í•œë‹¤.
    - `filter` `map` `reduce` `find` `match` `sort` ë“±ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.

- íŒŒì´í”„ë¼ì´ë‹
    - ëŒ€ë¶€ë¶„ì˜ ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì€ ìŠ¤íŠ¸ë¦¼ ìì‚°ì„ ë°˜í™˜í•œë‹¤. ì´ëŠ” ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ë¼ë¦¬ ì—°ê²°í•´ì„œ ì»¤ë‹¤ë€ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
    - Laziness, Short-Circuiting ê°™ì€ ìµœì í™”ë„ ê°€ëŠ¥í•˜ë‹¤.
- ë‚´ë¶€ ë°˜ë³µ
    - ë°˜ë³µìë¥¼ ì´ìš©í•˜ì—¬ ëª…ì‹œì ìœ¼ë¡œ ë°˜ë³µí•˜ëŠ” ì»¬ë ‰ì…˜ê³¼ ë‹¬ë¦¬ ìŠ¤íŠ¸ë¦¼ì€ ë‚´ë¶€ ë°˜ë³µì„ ì§€ì›í•œë‹¤.

# 4.3 ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜

ë°ì´í„°ë¥¼ ì–¸ì œ ê³„ì‚°í•˜ëŠëƒê°€ ì»¬ë ‰ì…˜ê³¼ ìŠ¤íŠ¸ë¦¼ì˜ ê°€ì¥ í° ì°¨ì´ë‹¤.

ì»¬ë ‰ì…˜ì€ í˜„ì¬ ìë£Œêµ¬ì¡°ê°€ í¬í•¨í•˜ëŠ” ëª¨ë“  ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤.

ì¦‰, ì»¬ë ‰ì…˜ì˜ ëª¨ë“  ìš”ì†ŒëŠ” ì»¬ë ‰ì…˜ì— ì¶”ê°€í•˜ê¸° ì „ì— ê³„ì‚°ë˜ì–´ì•¼ í•œë‹¤.

ìŠ¤íŠ¸ë¦¼ì€ ì´ë¡ ì ìœ¼ë¡œ ìš”ì²­í•  ë•Œë§Œ ìš”ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ê³ ì •ëœ ìë£Œêµ¬ì¡°ë‹¤.

ìƒì‚°ìì™€ ì†Œë¹„ì ê´€ê³„ë¥¼ í˜•ì„±í•˜ê³ , ê²Œìœ¼ë¥´ê²Œ ë§Œë“¤ì–´ì§€ëŠ” ì»¬ë ‰ì…˜ê³¼ ê°™ë‹¤.

### 4.3.1 ë”± í•œ ë²ˆë§Œ íƒìƒ‰í•  ìˆ˜ ìˆë‹¤.

ìŠ¤íŠ¸ë¦¼ì€ í•œ ë²ˆë§Œ íƒìƒ‰í•  ìˆ˜ ìˆë‹¤. íƒìƒ‰ëœ ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†ŒëŠ” ì†Œë¹„ëœë‹¤.

```java
List<String> title = Arrays.asList("Java8", "In", "Action");
Stream<String> s = title.stream();
s.forEach(System.out::println);
s.forEach(System.out::println); // throws IllegalStateException
```

### 4.3.2 ì™¸ë¶€ ë°˜ë³µê³¼ ë‚´ë¶€ ë°˜ë³µ

- ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ - ì™¸ë¶€ ë°˜ë³µ

ì‚¬ìš©ìê°€ ì§ì ‘ ìš”ì†Œë¥¼ ë°˜ë³µí•´ì•¼ í•œë‹¤.

```java
List<String> names = new ArrayList<>();
for(Dish dish: menu) {
	names.add(dish.getName());
}
```

- ìŠ¤íŠ¸ë¦¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ë‚´ë¶€ ë°˜ë³µ

í•¨ìˆ˜ì— ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í• ì§€ë§Œ ì§€ì •í•˜ë©´ ëª¨ë“  ê²ƒì´ ì•Œì•„ì„œ ì²˜ë¦¬ëœë‹¤.

```java
List<String> names = menu.stream()
												.map(Dish::getName)
												.collect(toList());
```

# 4.4 ìŠ¤íŠ¸ë¦¼ ì—°ì‚°

- ì¤‘ê°„ ì—°ì‚°

ì—°ê²°í•  ìˆ˜ ìˆëŠ” ìŠ¤íŠ¸ë¦¼ ì—°ì‚°

- ìµœì¢… ì—°ì‚°

ìŠ¤íŠ¸ë¦¼ì„ ë‹«ëŠ” ì—°ì‚°

### 4.4.1 ì¤‘ê°„ ì—°ì‚°

ì¤‘ê°„ ì—°ì‚°ì€ ë‹¨ë§ ì—°ì‚°ì„ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì— ì‹¤í–‰í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë¬´ ì—°ì‚°ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤ (Lazy)

```java
List<String> names =
		menu.stream()
				.fliter(dish -> {
									System.out.println("filtering:" + dish.getName());
									return dish.getCalories() > 300;
				})
				.map(dish -> {
									System.out.println("mapping:" + dish.getName());
									return dish.getName();
				)}
				.limit(3)
				.collect(toList());
System.out.println(names);
```

- ì¶œë ¥ ê²°ê³¼

```java
// output
filtering:pork
mapping:pork
filtering:beef
mapping:beef
filtering:chicken
mapping:chicken
[pork, beef, chicken]
```

ìŠ¤íŠ¸ë¦¼ì˜ ê²Œìœ¼ë¥¸ íŠ¹ì„±ìœ¼ë¡œ ëª‡ ê°€ì§€ ìµœì í™” íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.

1. 300 ì¹¼ë¡œë¦¬ê°€ ë„˜ëŠ” ìš”ë¦¬ëŠ” ì—¬ëŸ¬ ê°œì§€ë§Œ ì˜¤ì§ ì²˜ìŒ 3ê°œë§Œ ì„ íƒë˜ì—ˆë‹¤. (ì‡¼íŠ¸ì„œí‚·)
2. filterì™€ mapì€ ì„œë¡œ ë‹¤ë¥¸ ì—°ì‚°ì´ì§€ë§Œ í•œ ê³¼ì •ìœ¼ë¡œ ë³‘í•©ë˜ì—ˆë‹¤. (ë£¨í”„í“¨ì „)

### 4.4.2 ìµœì¢… ì—°ì‚°

ìµœì¢… ì—°ì‚°ì€ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì—ì„œ ê²°ê³¼ë¥¼ ë„ì¶œí•œë‹¤.

ë³´í†µ `List` `Integer` `void` ë“± ìŠ¤íŠ¸ë¦¼ ì´ì™¸ì˜ ê²°ê³¼ê°€ ë°˜í™˜ëœë‹¤.

### 4.4.3 ìŠ¤íŠ¸ë¦¼ ì´ìš©í•˜ê¸°

ìŠ¤íŠ¸ë¦¼ì˜ ì´ìš© ê³¼ì •ì€ ì„¸ ê°€ì§€ë¡œ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.

- ì§ˆì˜ë¥¼ ìˆ˜í–‰í•  ë°ì´í„° ì†ŒìŠ¤ (ì»¬ë ‰ì…˜)
- ì¤‘ê°„ ì—°ì‚° ì—°ê²°
- ìµœì¢… ì—°ì‚°ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë§Œë“¬

ì¤‘ê°„ ì—°ì‚°

```java
filter, map, limit, sorted, distinct
```

ìµœì¢… ì—°ì‚°

```java
forEach, count, collect
```