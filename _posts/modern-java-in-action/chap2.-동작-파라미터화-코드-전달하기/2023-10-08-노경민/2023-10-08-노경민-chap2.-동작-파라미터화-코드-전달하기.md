---
title: "π¦ chap2. λ™μ‘ νλΌλ―Έν„°ν™” μ½”λ“ μ „λ‹¬ν•κΈ°"
author: gengminy
date: 2023-10-08 20:00:00 +09:00
categories:
  [λ¨λ μλ°” μΈ μ•΅μ…, "chap2. λ™μ‘ νλΌλ―Έν„°ν™” μ½”λ“ μ „λ‹¬ν•κΈ°"]
tags: [λ¨λ μλ°” μΈ μ•΅μ…, JAVA, 2μ£Όμ°¨, λ…Έκ²½λ―Ό]
render_with_liquid: false
math: true
---

λ³€ν™”ν•λ” μ”κµ¬μ‚¬ν•­μ€ μ†ν”„νΈμ›¨μ–΄ μ—”μ§€λ‹μ–΄λ§μ—μ„ ν”Όν•  μ μ—†λ” λ¬Έμ μ΄λ‹¤.

μ‹μ‹κ°κ° λ³€ν•λ” μ‚¬μ©μ μ”κµ¬μ‚¬ν•­μ— μ–΄λ–»κ² λ€μ‘ν•΄μ•Ό ν• κΉ?

# 2.1 λ³€ν™”ν•λ” μ”κµ¬μ‚¬ν•­μ— λ€μ‘ν•κΈ°

## 2.1.1 μ²« λ²μ§Έ μ‹λ„ : λ…Ήμƒ‰ μ‚¬κ³Ό ν•„ν„°λ§

μ‚¬κ³Ό μƒ‰μ„ μ •μν•λ” λ‹¤μ enum μ΄ μ΅΄μ¬ν•λ‹¤κ³  ν•μ

```java
enum Color { RED, GREEN }
```

```java
public static List<Apple> filterGreenApples(List<Apple> inventory) {
	List<Apple> result = new ArrayList<>();
	for (Apple apple: inventory) {
		if (GREEN.equals(apple.getColor()) {
			result.add(apple);
		}
	}
	return result;
}
```

κ°‘μκΈ° λ†λ¶€κ°€ λ³€μ‹¬ν•μ—¬ μ΄λ΅μƒ‰μ΄ μ•„λ‹ λΉ¨κ°„μƒ‰ μ‚¬κ³Όλ¥Ό ν•„ν„°λ§ ν•κ³  μ‹¶μ–΄μ§„λ‹¤λ©΄ μ–΄λ–»κ² κ³ μ³μ•Ό ν• κΉ?

ν¬κ² κ³ λ―Όν•μ§€ μ•μ€ μ‚¬λμ΄λΌλ©΄ λ©”μ„λ“λ¥Ό λ³µμ‚¬ν•΄ filterRedApples λΌλ” μƒλ΅μ΄ λ©”μ„λ“λ¥Ό λ§λ“¤κ³ , if λ¬Έμ μ΅°κ±΄μ„ λ°”κΏ€ κ²ƒμ΄λ‹¤

ν•μ§€λ§ λ‚μ¤‘μ— λ” λ‹¤μ–‘ν• μƒ‰μƒμ—λ” λ€μ‘ν•  μ μ—†λ‹¤.

μ΄λ° μƒν™©μ—μ„λ” `κ±°μ λΉ„μ·ν• μ½”λ“κ°€ λ°λ³µ μ΅΄μ¬ν•λ‹¤λ©΄ κ·Έ μ½”λ“λ¥Ό μ¶”μƒν™”ν•λ‹¤.` λΌλ” μΆ‹μ€ κ·μΉ™μ΄ μλ‹¤.

## 2.1.2 λ‘ λ²μ§Έ μ‹λ„ : μƒ‰μ„ νλΌλ―Έν„°ν™”

μƒ‰μ„ νλΌλ―Έν„°ν™” ν•  μ μλ„λ΅ λ©”μ„λ“μ— νλΌλ―Έν„°λ¥Ό μ¶”κ°€ν•λ©΄ λ³€ν™”ν•λ” μ”κµ¬μ‚¬ν•­μ— μΆ€ λ” μ μ—°ν•κ² λ€μ‘ν•  μ μλ‹¤.

```java
public static List<Apple> filterApplesByColor(List<Apple> inventory, Color color) {
	List<Apple> result = new ArrayList<>();
	for (Apple apple: inventory) {
		if (apple.getColor().equals(color) {
			result.add(apple);
		}
	}
	return result;
}
```

κ·Έλ°λ° λ†λ¶€κ°€ λ λ³€μ‹¬ν•μ—¬ λ¬΄κ²κ°€ 150g μ΄μƒμΈ μ‚¬κ³Όλ¥Ό κµ¬λ³„ν•κ³  μ‹¶λ‹¤κ³  ν•λ©΄?

λ¬΄κ² μ •λ³΄ νλΌλ―Έν„°λ„ μ¶”κ°€ν–λ‹¤.

```java
public static List<Apple> filterApplesByWeight(List<Apple> inventory, int weight) {
	List<Apple> result = new ArrayList<>();
	for (Apple apple: inventory) {
		if (apple.getWeight() > weight {
			result.add(apple);
		}
	}
	return result;
}
```

μ΄λ ‡κ² κµ¬ν„ μ½”λ“κ°€ μ¤‘λ³µλλ‹¤λ©΄ μ†ν”„νΈμ›¨μ–΄ κ³µν•™μ DRY(donβ€™t repeat yourself) μ›μΉ™μ„ μ–΄κΈ°λ” κ²ƒμ΄λ‹¤.

### 2.1.3 μ„Έ λ²μ§Έ μ‹λ„ : κ°€λ¥ν• λ¨λ“  μ†μ„±μΌλ΅ ν•„ν„°λ§

μƒ‰μ΄λ‚ λ¬΄κ² μ¤‘ μ–΄λ–¤ κ²ƒμΌλ΅ ν•„ν„°λ§ν• μ§€ κ°€λ¦¬ν‚¤λ” ν”λκ·Έλ¥Ό μ •ν•  μλ„ μλ‹¤.

(ν•μ§€λ§ μ‹¤μ „μ—μ„λ” μ λ€ μ΄ λ°©λ²•μ„ μ‚¬μ©ν•΄μ„λ” μ•λλ‹¤)

```java
public static List<Apple> filterApples(List<Apple> inventory, Color color, int weight, boolean flag) {
	List<Apple> result = new ArrayList<>();
	for (Apple apple: inventory) {
		if ((flag && apple.getColor().equals(color)) ||
				(!flag && apple.getWeight() > weight) {
			result.add(apple);
		}
	}
	return result;
}
```

ν•νΈμ—†λ” μ½”λ“μ΄λ‹¤. true false κ°€ λ€μ²΄ λ¬΄μ—‡μ„ μλ―Έν•λ” κ²ƒμΈμ§€ μ• μ μ—†λ‹¤.

λ³€ν™”ν•λ” μ”κµ¬μ‚¬ν•­μ— μ μ—°ν•κ² λ€μ‘ν•  μλ„ μ—†λ‹¤.

# 2.2 λ™μ‘ νλΌλ―Έν„°ν™”

μ°Έ λλ” κ±°μ§“μ„ λ°ν™ν•λ” ν•¨μλ¥Ό Predicate λΌκ³  ν•λ‹¤.

μ„ νƒ μ΅°κ±΄μ„ κ²°μ •ν•λ” μΈν„°νμ΄μ¤λ¥Ό μ •μν•λ‹¤.

```java
public interface ApplePredicate {
	boolean test (Apple apple);
}
```

λ‹¤μ–‘ν• μ„ νƒ μ΅°κ±΄μ„ λ€ν‘ν•λ” μ—¬λ¬ λ²„μ „μ ApplePredicate λ¥Ό μ •μν•  μ μλ‹¤.

```java
public class AppleHeavyWeightPredicate implements ApplePredicate {
	public boolean test(Apple apple) {
		return apple.getWeight() > 150;
	}
}
```

```java
public class AppleGreenColorPredicate implements ApplePredicate {
	public boolean test(Apple apple) {
		return GREEN.equals(apple.getColor());
	}
}
```

<img src="https://github.com/L1LDB/L1LDB.github.io/blob/main/_posts/modern-java-in-action/chap2.-λ™μ‘-νλΌλ―Έν„°ν™”-μ½”λ“-μ „λ‹¬ν•κΈ°/2023-10-08-λ…Έκ²½λ―Ό/1.png" />

μ„ μ΅°κ±΄μ— λ”°λΌ filter λ©”μ„λ“κ°€ λ‹¤λ¥΄κ² λ™μ‘ν•  κ²ƒμ΄λΌκ³  μμƒν•  μ μλ‹¤.

μ΄λ¥Ό μ „λµ λ””μμΈ ν¨ν„΄(Strategy design pattern) μ΄λΌκ³  ν•λ‹¤.

μ „λµ λ””μμΈ ν¨ν„΄μ€ μ „λµμ΄λΌ λ¶λ¦¬λ” κ° μ•κ³ λ¦¬μ¦μ„ μΊ΅μν™” ν•λ” μ•κ³ λ¦¬μ¦ ν¨λ°€λ¦¬λ¥Ό μ •μν•΄ λ‘” λ‹¤μμ—

λ°νƒ€μ„μ— μ•κ³ λ¦¬μ¦μ„ μ„ νƒν•λ” κΈ°λ²•μ΄λ‹¤.

μ—¬κΈ°μ—μ„λ” ApplePredicate κ°€ μ•κ³ λ¦¬μ¦ ν¨λ°€λ¦¬μ΄κ³ 

AppleHeavyWeightPredicate μ™€ AppleGreenColorPredicate κ°€ μ „λµμ΄λ‹¤.

λ™μ‘ νλΌλ―Έν„°ν™”, μ¦‰ λ©”μ„λ“κ°€ λ‹¤μ–‘ν• λ™μ‘ λλ” μ „λµμ„ λ°›μ•„μ„ λ‚΄λ¶€μ μΌλ΅ λ‹¤μ–‘ν• λ™μ‘μ„ μν–‰ν•  μ μλ‹¤.

### 2.2.1 λ„¤ λ²μ§Έ μ‹λ„ : μ¶”μƒμ  μ΅°κ±΄μΌλ΅ ν•„ν„°λ§

```java
public static List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
	List<Apple> result = new ArrayList<>();
	for (Apple apple: inventory) {
		if (p.test(apple) {
			result.add(apple);
		}
	}
	return result;
}
```

μ°λ¦¬λ” filterApples λ©”μ„λ“μ λ™μ‘μ„ νλΌλ―Έν„°ν™” ν–λ‹¤.

μ΄λ” μ½”λ“λ¥Ό λ©”μ„λ“μ— μ „λ‹¬ν• κ²ƒμ΄λ‚ λ‹¤λ¦„μ—†λ‹¤.

ν•μ§€λ§ μ—¬λ¬ ν΄λμ¤λ¥Ό κµ¬ν„ν•΄μ„ μΈμ¤ν„΄μ¤ν™”ν•λ” κ³Όμ •μ΄ μ΅°κΈμ€ κ±°μ¶”μ¥μ¤λ½λ‹¤.

μ΄ λ¶€λ¶„μ„ μ–΄λ–»κ² κ°μ„ ν•  μ μμ„κΉ

# 2.3 λ³µμ΅ν• κ³Όμ • κ°„μ†ν™”

ν„μ¬λ” filterApples λ©”μ„λ“λ΅ μƒλ΅μ΄ λ™μ‘μ„ μ •μν•λ ¤λ©΄ ApplePredicate μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” μ—¬λ¬ ν΄λμ¤λ¥Ό μ •μν• λ‹¤μμ— μΈμ¤ν„΄μ¤ν™”ν•΄μ•Ό ν•λ‹¤. μ΄λ” μƒλ‹Ήν λ²κ±°λ΅­κ³  μ‹κ°„ λ‚­λΉ„μ΄λ‹¤.

ν΄λμ¤μ μ„ μ–Έκ³Ό μΈμ¤ν„΄μ¤ν™”λ¥Ό λ™μ‹μ— μν–‰ν•  μ μλ„λ΅ μµλ… ν΄λμ¤λΌλ” κΈ°λ²•μ„ μ‚¬μ©ν•΄λ³΄μ.

### 2.3.1 μµλ… ν΄λμ¤

μµλ… ν΄λμ¤λ¥Ό μ΄μ©ν•λ©΄ ν΄λμ¤ μ„ μ–Έκ³Ό μΈμ¤ν„΄μ¤ν™”λ¥Ό λ™μ‹μ— ν•  μ μλ‹¤.

### 2.3.2 λ‹¤μ„― λ²μ§Έ μ‹λ„ : μµλ… ν΄λμ¤ μ‚¬μ©

```java
List<Apple> redApples = filterApples(inventory, new ApplePredicate() {
	public boolean test(Apple apple) {
		return RED.equals(apple.getColor());
	}
}
```

μµλ… ν΄λμ¤λ΅λ„ μ•„μ§ λ¶€μ΅±ν• μ μ΄ μλ‹¤. μµλ… ν΄λμ¤λ” μ—¬μ „ν λ§μ€ κ³µκ°„μ„ μ°¨μ§€ν•λ‹¤.

μ½”λ“μ μ¥ν™©ν•¨μ€ λ‚μ νΉμ„±μ΄λ‹¤. κµ¬ν„ν•κ³  μ μ§€λ³΄μν•λ” λ° μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬κ³  μ½λ” μ¦κ±°μ›€μ„ λΉΌμ•—λ”λ‹¤.

### 2.3.3 μ—¬μ„― λ²μ§Έ μ‹λ„ : λλ‹¤ ν‘ν„μ‹ μ‚¬μ©

μλ°” 8μ λλ‹¤ ν‘ν„μ‹μ„ μ΄μ©ν•΄μ„ κ°„λ‹¨ν•κ² μ¬κµ¬ν„ν•  μ μλ‹¤.

```java
List<Apple> redApples = filterApples(inventory, 
			(Apple apple) -> RED.equals(apple.getColor()));
```

κ°„κ²°ν•΄μ§€λ©΄μ„ λ¬Έμ λ¥Ό λ” μ μ„¤λ…ν•λ” μ½”λ“κ°€ λμ—λ‹¤.

### 2.3.4 μΌκ³± λ²μ§Έ μ‹λ„ : λ¦¬μ¤νΈ ν•μ‹μΌλ΅ μ¶”μƒν™”

```java
public interface Predicate<T> {
	boolean test(T t);
}

public static <T> List<T> filter(List<T> list, Predicate<T> p) {
	List<T> result = new ArrayList<>();
	for(T e: list) {
		if(p.test(e)) {
			result.add(e);
		}
	}
}
```

μ΄μ  λ°”λ‚λ‚, μ¤λ μ§€, μ •μ, λ¬Έμμ—΄ λ“±μ λ¦¬μ¤νΈμ— ν•„ν„° λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

```java
List<Apple> redApples = 
	filter(inventory, (Apple apple) -> RED.equals(apple.getColor()));

List<Integer> evenNumbers =
	filter(numbers, (Integer i) -> i % 2 == 0);
```

# 2.4 μ‹¤μ „ μμ 

### 2.4.1 Comparatorλ΅ μ •λ ¬ν•κΈ°

μ»¬λ ‰μ… μ •λ ¬μ€ λ°λ³µλλ” ν”„λ΅κ·Έλλ° μ‘μ—…μ΄λ‹¤.

μλ°” 8μ Listμ—λ” sort λ©”μ„λ“κ°€ ν¬ν•¨λμ–΄ μλ‹¤.

λ‹¤μκ³Ό κ°™μ€ μΈν„°νμ΄μ¤λ¥Ό κ°–λ” `java.util.Comparator` κ°μ²΄λ¥Ό μ΄μ©ν•μ—¬

sort μ λ™μ‘μ„ νλΌλ―Έν„°ν™”ν•  μ μλ‹¤.

```java
public interface Comparator<T> {
	int compare(T o1, T o2);
}
```

μ΄λ¥Ό μ΄μ©ν•΄μ„ λ¬΄κ²κ°€ μ μ€ μμ„λ΅ μ‚¬κ³Όλ¥Ό μ •λ ¬ν•  μ μλ‹¤.

```java
inventory.sort(new Comparator<Apple>() {
	public int compare(Apple a1, Apple a2) {
		return a1.getWeight().compareTo(a2.getWeight());
	}
}
```

λλ‹¤λ¥Ό μ‚¬μ©ν•΄μ„ κ°„λ‹¨ν•κ² μ½”λ“λ¥Ό κµ¬ν„ν•  μ μλ‹¤.

```java
inventory.sort(
	(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()));
```

### 2.4.2 Runnableλ΅ μ½”λ“ λΈ”λ΅ μ‹¤ν–‰ν•κΈ°

μλ°” μ¤λ λ“λ¥Ό μ΄μ©ν•λ©΄ λ³‘λ ¬ μ½”λ“ λΈ”λ΅ μ‹¤ν–‰μ΄ κ°€λ¥ν•λ‹¤.

μλ°” 8κΉμ§€λ” Thread μƒμ„±μμ— κ°μ²΄λ§μ„ μ „λ‹¬ν•  μ μμ—κΈ° λ•λ¬Έμ— λ³΄ν†µ κ²°κ³Όλ¥Ό λ°ν™ν•μ§€ μ•λ” void run λ©”μ†λ“λ¥Ό ν¬ν•¨ν•λ” μµλ… ν΄λμ¤κ°€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ„λ΅ ν•λ” κ²ƒμ΄ μΌλ°μ μ΄μ—λ‹¤.

μλ°”μ—μ„λ” Runnable μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•μ—¬ μ‹¤ν–‰ν•  μ½”λ“ λΈ”λ΅μ„ μ§€μ •ν•  μ μλ‹¤.

```java
public interface Runnable {
	void run();
}
```

Runnableμ„ μ΄μ©ν•΄μ„ λ‹¤μ–‘ν• λ™μ‘μ„ μ¤λ λ“λ΅ μ‹¤ν–‰ν•  μ μλ‹¤.

```java
Thread t = new Thread(new Runnable() {
	public void run() {
		System.out.println("Hello world");
	}
});
```

μλ°” 8λ¶€ν„° μ§€μ›ν•λ” λλ‹¤ ν‘ν„μ‹μ„ μ΄μ©ν•λ©΄ λ‹¤μμ²λΌ μ¤λ λ“ μ½”λ“λ¥Ό κµ¬ν„ν•  μ μλ‹¤.

```java
Thread t = new Thread(() -> System.out.println("Hello world"));
```

### 2.4.3 Callableμ„ κ²°κ³Όλ΅ λ°ν™ν•κΈ°

μλ°” 5λ¶€ν„° μ§€μ›ν•λ” `ExecutorService` μΈν„°νμ΄μ¤λ” νƒμ¤ν¬ μ μ¶κ³Ό μ‹¤ν–‰ κ³Όμ •μ μ—°κ΄€μ„±μ„ λμ–΄μ¤€λ‹¤. μ΄λ¥Ό μ΄μ©ν•λ©΄ νƒμ¤ν¬λ¥Ό μ¤λ λ“ ν’€λ΅ λ³΄λ‚΄κ³  κ²°κ³Όλ¥Ό `Future` λ΅ μ €μ¥ν•  μ μλ‹¤.

```java
public interface Callable<V> {
	V call();
}
```

μ‹¤ν–‰ μ„λΉ„μ¤μ— νƒμ¤ν¬λ¥Ό μ μ¶ν•΄μ„ μ„ μ½”λ“λ¥Ό ν™μ©ν•  μ μλ‹¤.

```java
ExecutorService executorService = Executors.newCachedThreadPool();
Future<String> threadName = executorService.submit(new Callable<String>() {
	@Override
	public String call() throws Exception {
		return Thread.currentThread().getName();
	}
});
```

λλ‹¤λ¥Ό μ΄μ©ν•λ©΄

```java
Future<String> threadName = executorService.submit(
	() -> Thread.currentThread().getName());
```

### 2.4.4 GUI μ΄λ²¤νΈ μ²λ¦¬ν•κΈ°

GUI ν”„λ΅κ·Έλλ°μ€ λ§μ°μ¤ ν΄λ¦­μ΄λ‚ λ¬Έμμ—΄ μ„λ΅ μ΄λ™ν•λ” λ“±μ μ΄λ²¤νΈμ— λ€μ‘ν•λ” λ™μ‘μ„ μν–‰ν•λ” μ‹μΌλ΅ λ™μ‘ν•λ‹¤.

μλ°”FXμ—μ„λ” `setOnAction` λ©”μ„λ“μ— `EventHandler` λ¥Ό μ „λ‹¬ν•¨μΌλ΅μ¨ μ΄λ²¤νΈμ— μ–΄λ–»κ² λ°μ‘ν• μ§€ μ„¤μ •ν•  μ μλ‹¤.

```java
Buttin button = new Button("Send");
button.setOnAction(new EventHandler<ActionEvent>() {
	public void handle(ActionEvent event) {
		label.setText("Sent!!");
	}
});
```

λλ‹¤λ¥Ό μ‚¬μ©ν•λ©΄

```java
button.setOnAction((ActionEvent event) -> label.setText("Sent!!"));
```